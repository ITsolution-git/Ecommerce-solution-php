
var mammoth=function(a){var b=$("textarea[rte]",a);b.length&&head.js("/ckeditor/ckeditor.js","/ckeditor/adapters/jquery.js",function(){b.ckeditor({autoGrow_minHeight:100,resize_minHeight:100,height:100,toolbar:[["Bold","Italic","Underline"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","Table"],["Format"],["Link","Unlink"],["Source"]]})});var c=$("form[ajax]",a);c.length&&head.js("/js2/?f=jquery.form",function(){c.ajaxForm({dataType:"json",success:ajaxResponse})})};head.ready(function(){mammoth($("body"))});(function(d,i,j){d.fn.dataTableSettings=[];var n=d.fn.dataTableSettings;d.fn.dataTableExt={};var h=d.fn.dataTableExt;h.sVersion="1.7.2";h.sErrMode="alert";h.iApiIndex=0;h.oApi={};h.afnFiltering=[];h.aoFeatures=[];h.ofnSearch={};h.afnSortData=[];h.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};h.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};h.oPagination={two_button:{fnInit:function(e,h,K){var x,i,n;e.bJUI?(x=j.createElement("a"),i=j.createElement("a"),n=j.createElement("span"),n.className=e.oClasses.sPageJUINext,i.appendChild(n),n=j.createElement("span"),n.className=e.oClasses.sPageJUIPrev,x.appendChild(n)):(x=j.createElement("div"),i=j.createElement("div"));x.className=e.oClasses.sPagePrevDisabled;i.className=e.oClasses.sPageNextDisabled;x.title=e.oLanguage.oPaginate.sPrevious;i.title=e.oLanguage.oPaginate.sNext;h.appendChild(x);h.appendChild(i);d(x).click(function(){e.oApi._fnPageChange(e,"previous")&&K(e)});d(i).click(function(){e.oApi._fnPageChange(e,"next")&&K(e)});d(x).bind("selectstart",function(){return!1});d(i).bind("selectstart",function(){return!1});e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(h.setAttribute("id",e.sTableId+"_paginate"),x.setAttribute("id",e.sTableId+"_previous"),i.setAttribute("id",e.sTableId+"_next"))},fnUpdate:function(e){if(e.aanFeatures.p)for(var d=e.aanFeatures.p,h=0,j=d.length;h<j;h++)if(d[h].childNodes.length!==0)d[h].childNodes[0].className=e._iDisplayStart===0?e.oClasses.sPagePrevDisabled:e.oClasses.sPagePrevEnabled,d[h].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?e.oClasses.sPageNextDisabled:e.oClasses.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,h,i){var x=j.createElement("span"),n=j.createElement("span"),A=j.createElement("span"),B=j.createElement("span"),v=j.createElement("span");x.innerHTML=e.oLanguage.oPaginate.sFirst;n.innerHTML=e.oLanguage.oPaginate.sPrevious;B.innerHTML=e.oLanguage.oPaginate.sNext;v.innerHTML=e.oLanguage.oPaginate.sLast;var u=e.oClasses;x.className=u.sPageButton+" "+u.sPageFirst;n.className=u.sPageButton+" "+u.sPagePrevious;B.className=u.sPageButton+" "+u.sPageNext;v.className=u.sPageButton+" "+u.sPageLast;h.appendChild(x);h.appendChild(n);h.appendChild(A);h.appendChild(B);h.appendChild(v);d(x).click(function(){e.oApi._fnPageChange(e,"first")&&i(e)});d(n).click(function(){e.oApi._fnPageChange(e,"previous")&&i(e)});d(B).click(function(){e.oApi._fnPageChange(e,"next")&&i(e)});d(v).click(function(){e.oApi._fnPageChange(e,"last")&&i(e)});d("span",h).bind("mousedown",function(){return!1}).bind("selectstart",function(){return!1});e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(h.setAttribute("id",e.sTableId+"_paginate"),x.setAttribute("id",e.sTableId+"_first"),n.setAttribute("id",e.sTableId+"_previous"),B.setAttribute("id",e.sTableId+"_next"),v.setAttribute("id",e.sTableId+"_last"))},fnUpdate:function(e,j){if(e.aanFeatures.p){var i=h.oPagination.iFullNumbersShowPages,n=Math.floor(i/2),D=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),A=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,B="",v,u=e.oClasses;D<i?(n=1,v=D):A<=n?(n=1,v=i):A>=D-n?(n=D-i+1,v=D):(n=A-Math.ceil(i/2)+1,v=n+i-1);for(i=n;i<=v;i++)B+=A!=i?'<span class="'+u.sPageButton+'">'+i+"</span>":'<span class="'+u.sPageButtonActive+'">'+i+"</span>";v=e.aanFeatures.p;for(var q,y=function(){e._iDisplayStart=(this.innerHTML*1-1)*e._iDisplayLength;j(e);return!1},F=function(){return!1},i=0,n=v.length;i<n;i++)v[i].childNodes.length!==0&&(q=d("span:eq(2)",v[i]),q.html(B),d("span",q).click(y).bind("mousedown",F).bind("selectstart",F),q=v[i].getElementsByTagName("span"),q=[q[0],q[1],q[q.length-2],q[q.length-1]],d(q).removeClass(u.sPageButton+" "+u.sPageButtonActive+" "+u.sPageButtonStaticDisabled),A==1?(q[0].className+=" "+u.sPageButtonStaticDisabled,q[1].className+=" "+u.sPageButtonStaticDisabled):(q[0].className+=" "+u.sPageButton,q[1].className+=" "+u.sPageButton),D===0||A==D||e._iDisplayLength==-1?(q[2].className+=" "+u.sPageButtonStaticDisabled,q[3].className+=" "+u.sPageButtonStaticDisabled):(q[2].className+=" "+u.sPageButton,q[3].className+=" "+u.sPageButton))}}}};h.oSort={"string-asc":function(e,d){e=e.toLowerCase();d=d.toLowerCase();return e<d?-1:e>d?1:0},"string-desc":function(e,d){e=e.toLowerCase();d=d.toLowerCase();return e<d?1:e>d?-1:0},"html-asc":function(e,d){e=e.replace(/<.*?>/g,"").toLowerCase();d=d.replace(/<.*?>/g,"").toLowerCase();return e<d?-1:e>d?1:0},"html-desc":function(d,h){d=d.replace(/<.*?>/g,"").toLowerCase();h=h.replace(/<.*?>/g,"").toLowerCase();return d<h?1:d>h?-1:0},"date-asc":function(d,h){d=Date.parse(d);h=Date.parse(h);if(isNaN(d)||d==="")d=Date.parse("01/01/1970 00:00:00");if(isNaN(h)||h==="")h=Date.parse("01/01/1970 00:00:00");return d-h},"date-desc":function(d,h){alert(d);d=Date.parse(d);h=Date.parse(h);if(isNaN(d)||d==="")d=Date.parse("01/01/1970 00:00:00");if(isNaN(h)||h==="")h=Date.parse("01/01/1970 00:00:00");return h-d},"numeric-asc":function(d,h){return(d=="-"||d===""?0:d*1)-(h=="-"||h===""?0:h*1)},"numeric-desc":function(d,h){return(h=="-"||h===""?0:h*1)-(d=="-"||d===""?0:d*1)}};h.aTypes=[function(d){if(d.length===0)return"numeric";var h,j=!1;h=d.charAt(0);if("0123456789-".indexOf(h)==-1)return null;for(var i=1;i<d.length;i++){h=d.charAt(i);if("0123456789.".indexOf(h)==-1)return null;if(h=="."){if(j)return null;j=!0}}return"numeric"},function(d){var h=Date.parse(d);if(h!==null&&!isNaN(h)||d.length===0)return"date";return null},function(d){if(d.indexOf("<")!=-1&&d.indexOf(">")!=-1)return"html";return null}];h.fnVersionCheck=function(d){for(var j=function(d,e){for(;d.length<e;)d+="0";return d},i=h.sVersion.split("."),d=d.split("."),n="",D="",A=0,B=d.length;A<B;A++)n+=j(i[A],3),D+=j(d[A],3);return parseInt(n,10)>=parseInt(D,10)};h._oExternConfig={iNextUnique:0};d.fn.dataTable=function(e){function X(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?this._iRecordsTotal:this.aiDisplayMaster.length};this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?this._iRecordsDisplay:this.aiDisplay.length};this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd};this.sInstance=this.oInstance=null;this.oFeatures={bPaginate:!0,bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,bAutoWidth:!0,bProcessing:!1,bSortClasses:!0,bStateSave:!1,bServerSide:!1};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:!1,bInfinite:!1,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:!1,bSmart:!0};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.fnFooterCallback=this.fnHeaderCallback=this.fnRowCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTableWrapper=this.nTBody=this.nTFoot=this.nTHead=this.nTable=null;this.iDefaultSortIndex=0;this.bInitialised=!1;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=7200;this.sCookiePrefix="SpryMedia_DataTables_";this.sAjaxSource=this.fnCookieCallback=null;this.bAjaxDataGet=!0;this.fnServerData=function(a,b,c){d.ajax({url:a,data:b,success:c,dataType:"json",cache:!1,error:function(){alert("DataTables warning: JSON data from server failed to load or be parsed. This is most likely to be caused by a JSON formatting error.")}})};this.fnFormatNumber=function(a){if(a<1E3)return a;else for(var b=a+"",a=b.split(""),c="",b=b.length,f=0;f<b;f++)f%3===0&&f!==0&&(c=","+c),c=a[b-f-1]+c;return c};this.aLengthMenu=[10,25,50,100];this.bDrawing=this.iDraw=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsDisplay=this._iRecordsTotal=0;this.bJUI=!1;this.oClasses=h.oStdClasses;this.bSorted=this.bFiltered=!1;this.oInit=null}function K(a){return function(){var b=[C(this[h.iApiIndex])].concat(Array.prototype.slice.call(arguments));return h.oApi[a].apply(this,b)}}function x(a){var b,c;if(a.bInitialised===!1)setTimeout(function(){x(a)},200);else{R(a);q(a);a.oFeatures.bAutoWidth&&Y(a);b=0;for(c=a.aoColumns.length;b<c;b++)if(a.aoColumns[b].sWidth!==null)a.aoColumns[b].nTh.style.width=t(a.aoColumns[b].sWidth);a.oFeatures.bSort?s(a):(a.aiDisplay=a.aiDisplayMaster.slice(),E(a),y(a));a.sAjaxSource!==null&&!a.oFeatures.bServerSide?(L(a,!0),a.fnServerData.call(a.oInstance,a.sAjaxSource,[],function(c){for(b=0;b<c.aaData.length;b++)v(a,c.aaData[b]);a.iInitDisplayStart=a._iDisplayStart;a.oFeatures.bSort?s(a):(a.aiDisplay=a.aiDisplayMaster.slice(),E(a),y(a));L(a,!1);typeof a.fnInitComplete=="function"&&a.fnInitComplete.call(a.oInstance,a,c)})):a.oFeatures.bServerSide||L(a,!1)}}function D(a,b,c){m(a.oLanguage,b,"sProcessing");m(a.oLanguage,b,"sLengthMenu");m(a.oLanguage,b,"sEmptyTable");m(a.oLanguage,b,"sZeroRecords");m(a.oLanguage,b,"sInfo");m(a.oLanguage,b,"sInfoEmpty");m(a.oLanguage,b,"sInfoFiltered");m(a.oLanguage,b,"sInfoPostFix");m(a.oLanguage,b,"sSearch");typeof b.oPaginate!="undefined"&&(m(a.oLanguage.oPaginate,b.oPaginate,"sFirst"),m(a.oLanguage.oPaginate,b.oPaginate,"sPrevious"),m(a.oLanguage.oPaginate,b.oPaginate,"sNext"),m(a.oLanguage.oPaginate,b.oPaginate,"sLast"));typeof b.sEmptyTable=="undefined"&&typeof b.sZeroRecords!="undefined"&&m(a.oLanguage,b,"sZeroRecords","sEmptyTable");c&&x(a)}function A(a,b){a.aoColumns[a.aoColumns.length++]={sType:null,_bAutoType:!0,bVisible:!0,bSearchable:!0,bSortable:!0,asSorting:["asc","desc"],sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,sTitle:b?b.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:!0,iDataSort:a.aoColumns.length-1,sSortDataType:"std",nTh:b?b:j.createElement("th"),nTf:null};b=a.aoColumns.length-1;if(typeof a.aoPreSearchCols[b]=="undefined"||a.aoPreSearchCols[b]===null)a.aoPreSearchCols[b]={sSearch:"",bRegex:!1,bSmart:!0};else{if(typeof a.aoPreSearchCols[b].bRegex=="undefined")a.aoPreSearchCols[b].bRegex=!0;if(typeof a.aoPreSearchCols[b].bSmart=="undefined")a.aoPreSearchCols[b].bSmart=!0}B(a,b,null)}function B(a,b,c){b=a.aoColumns[b];if(typeof c!="undefined"&&c!==null){if(typeof c.sType!="undefined")b.sType=c.sType,b._bAutoType=!1;m(b,c,"bVisible");m(b,c,"bSearchable");m(b,c,"bSortable");m(b,c,"sTitle");m(b,c,"sName");m(b,c,"sWidth");m(b,c,"sWidth","sWidthOrig");m(b,c,"sClass");m(b,c,"fnRender");m(b,c,"bUseRendered");m(b,c,"iDataSort");m(b,c,"asSorting");m(b,c,"sSortDataType")}if(!a.oFeatures.bSort)b.bSortable=!1;if(!b.bSortable||d.inArray("asc",b.asSorting)==-1&&d.inArray("desc",b.asSorting)==-1)b.sSortingClass=a.oClasses.sSortableNone,b.sSortingClassJUI="";else if(d.inArray("asc",b.asSorting)!=-1&&d.inArray("desc",b.asSorting)==-1)b.sSortingClass=a.oClasses.sSortableAsc,b.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed;else if(d.inArray("asc",b.asSorting)==-1&&d.inArray("desc",b.asSorting)!=-1)b.sSortingClass=a.oClasses.sSortableDesc,b.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed}function v(a,b){if(b.length!=a.aoColumns.length&&a.iDrawError!=a.iDraw)return J(a,0,"Added data (size "+b.length+") does not match known number of columns ("+a.aoColumns.length+")"),a.iDrawError=a.iDraw,-1;var b=b.slice(),c=a.aoData.length;a.aoData.push({nTr:j.createElement("tr"),_iId:a.iNextId++,_aData:b,_anHidden:[],_sRowStripe:""});for(var f,p,g=0;g<b.length;g++){f=j.createElement("td");b[g]===null&&(b[g]="");typeof a.aoColumns[g].fnRender=="function"?(p=a.aoColumns[g].fnRender({iDataRow:c,iDataColumn:g,aData:b,oSettings:a}),f.innerHTML=p,a.aoColumns[g].bUseRendered&&(a.aoData[c]._aData[g]=p)):f.innerHTML=b[g];typeof b[g]!="string"&&(b[g]+="");b[g]=d.trim(b[g]);if(a.aoColumns[g].sClass!==null)f.className=a.aoColumns[g].sClass;if(a.aoColumns[g]._bAutoType&&a.aoColumns[g].sType!="string")if(p=Z(a.aoData[c]._aData[g]),a.aoColumns[g].sType===null)a.aoColumns[g].sType=p;else if(a.aoColumns[g].sType!=p)a.aoColumns[g].sType="string";a.aoColumns[g].bVisible?a.aoData[c].nTr.appendChild(f):a.aoData[c]._anHidden[g]=f}a.aiDisplayMaster.push(c);return c}function u(a){var b,c,f,p,g,e,k,h;if(a.sAjaxSource===null){k=a.nTBody.childNodes;b=0;for(c=k.length;b<c;b++)if(k[b].nodeName.toUpperCase()=="TR"){e=a.aoData.length;a.aoData.push({nTr:k[b],_iId:a.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});a.aiDisplayMaster.push(e);h=a.aoData[e]._aData;e=k[b].childNodes;f=g=0;for(p=e.length;f<p;f++)e[f].nodeName.toUpperCase()=="TD"&&(h[g]=d.trim(e[f].innerHTML),g++)}}k=S(a);e=[];b=0;for(c=k.length;b<c;b++){f=0;for(p=k[b].childNodes.length;f<p;f++)g=k[b].childNodes[f],g.nodeName.toUpperCase()=="TD"&&e.push(g)}e.length!=k.length*a.aoColumns.length&&J(a,1,"Unexpected number of TD elements. Expected "+k.length*a.aoColumns.length+" and got "+e.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.");k=0;for(f=a.aoColumns.length;k<f;k++){if(a.aoColumns[k].sTitle===null)a.aoColumns[k].sTitle=a.aoColumns[k].nTh.innerHTML;p=a.aoColumns[k]._bAutoType;g=typeof a.aoColumns[k].fnRender=="function";h=a.aoColumns[k].sClass!==null;var l=a.aoColumns[k].bVisible,j,i;if(p||g||h||!l){b=0;for(c=a.aoData.length;b<c;b++){j=e[b*f+k];if(p&&a.aoColumns[k].sType!="string")if(i=Z(a.aoData[b]._aData[k]),a.aoColumns[k].sType===null)a.aoColumns[k].sType=i;else if(a.aoColumns[k].sType!=i)a.aoColumns[k].sType="string";if(g)i=a.aoColumns[k].fnRender({iDataRow:b,iDataColumn:k,aData:a.aoData[b]._aData,oSettings:a}),j.innerHTML=i,a.aoColumns[k].bUseRendered&&(a.aoData[b]._aData[k]=i);h&&(j.className+=" "+a.aoColumns[k].sClass);l||(a.aoData[b]._anHidden[k]=j,j.parentNode.removeChild(j))}}}}function q(a){var b,c,f,p=0;if(a.nTHead.getElementsByTagName("th").length!==0){b=0;for(f=a.aoColumns.length;b<f;b++)if(c=a.aoColumns[b].nTh,a.aoColumns[b].bVisible){if(a.aoColumns[b].sTitle!=c.innerHTML)c.innerHTML=a.aoColumns[b].sTitle}else c.parentNode.removeChild(c),p++}else{p=j.createElement("tr");b=0;for(f=a.aoColumns.length;b<f;b++)if(c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,a.aoColumns[b].bVisible){if(a.aoColumns[b].sClass!==null)c.className=a.aoColumns[b].sClass;p.appendChild(c)}d(a.nTHead).html("")[0].appendChild(p)}if(a.bJUI){b=0;for(f=a.aoColumns.length;b<f;b++)c=a.aoColumns[b].nTh,p=j.createElement("div"),p.className=a.oClasses.sSortJUIWrapper,d(c).contents().appendTo(p),p.appendChild(j.createElement("span")),c.appendChild(p)}f=function(){this.onselectstart=function(){return!1};return!1};if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)a.aoColumns[b].bSortable!==!1?($(a,a.aoColumns[b].nTh,b),d(a.aoColumns[b].nTh).mousedown(f)):d(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(a.nTFoot!==null){p=0;c=a.nTFoot.getElementsByTagName("th");b=0;for(f=c.length;b<f;b++)if(typeof a.aoColumns[b]!="undefined")a.aoColumns[b].nTf=c[b-p],a.oClasses.sFooterTH!==""&&(a.aoColumns[b].nTf.className+=" "+a.oClasses.sFooterTH),a.aoColumns[b].bVisible||(c[b-p].parentNode.removeChild(c[b-p]),p++)}}function y(a){var b,c,f=[],p=0,g=!1;b=a.asStripClasses.length;c=a.aoOpenRows.length;a.bDrawing=!0;if(typeof a.iInitDisplayStart!="undefined"&&a.iInitDisplayStart!=-1)a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,E(a);if(!a.oFeatures.bServerSide||w(a)){a.oFeatures.bServerSide||a.iDraw++;if(a.aiDisplay.length!==0){var e=a._iDisplayStart,k=a._iDisplayEnd;if(a.oFeatures.bServerSide)e=0,k=a.aoData.length;for(;e<k;e++){var h=a.aoData[a.aiDisplay[e]],l=h.nTr;if(b!==0){var i=a.asStripClasses[p%b];if(h._sRowStripe!=i)d(l).removeClass(h._sRowStripe).addClass(i),h._sRowStripe=i}typeof a.fnRowCallback=="function"&&(l=a.fnRowCallback.call(a.oInstance,l,a.aoData[a.aiDisplay[e]]._aData,p,e),!l&&!g&&(J(a,0,"A node was not returned by fnRowCallback"),g=!0));f.push(l);p++;if(c!==0)for(h=0;h<c;h++)l==a.aoOpenRows[h].nParent&&f.push(a.aoOpenRows[h].nTr)}}else{f[0]=j.createElement("tr");if(typeof a.asStripClasses[0]!="undefined")f[0].className=a.asStripClasses[0];g=j.createElement("td");g.setAttribute("valign","top");g.colSpan=T(a);g.className=a.oClasses.sRowEmpty;g.innerHTML=typeof a.oLanguage.sEmptyTable!="undefined"&&a.fnRecordsTotal()===0?a.oLanguage.sEmptyTable:a.oLanguage.sZeroRecords.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()));f[p].appendChild(g)}typeof a.fnHeaderCallback=="function"&&a.fnHeaderCallback.call(a.oInstance,d(">tr",a.nTHead)[0],U(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);typeof a.fnFooterCallback=="function"&&a.fnFooterCallback.call(a.oInstance,d(">tr",a.nTFoot)[0],U(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);p=j.createDocumentFragment();b=j.createDocumentFragment();if(a.nTBody){g=a.nTBody.parentNode;b.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){c=a.nTBody.childNodes;for(b=c.length-1;b>=0;b--)c[b].parentNode.removeChild(c[b])}b=0;for(c=f.length;b<c;b++)p.appendChild(f[b]);a.nTBody.appendChild(p);g!==null&&g.appendChild(a.nTBody)}b=0;for(c=a.aoDrawCallback.length;b<c;b++)a.aoDrawCallback[b].fn.call(a.oInstance,a);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;if(typeof a._bInitComplete=="undefined")a._bInitComplete=!0,typeof a.fnInitComplete=="function"&&(a.oFeatures.bServerSide||a.sAjaxSource===null)&&a.fnInitComplete.call(a.oInstance,a)}}function F(a){a.oFeatures.bSort?s(a,a.oPreviousSearch):a.oFeatures.bFilter?l(a,a.oPreviousSearch):(E(a),y(a))}function w(a){if(a.bAjaxDataGet){L(a,!0);var b=a.aoColumns.length,c=[],f;a.iDraw++;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:aa(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:a.oFeatures.bPaginate!==!1?a._iDisplayLength:-1});if(a.oFeatures.bFilter!==!1){c.push({name:"sSearch",value:a.oPreviousSearch.sSearch});c.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(f=0;f<b;f++)c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable})}if(a.oFeatures.bSort!==!1){var d=a.aaSortingFixed!==null?a.aaSortingFixed.length:0,g=a.aaSorting.length;c.push({name:"iSortingCols",value:d+g});for(f=0;f<d;f++)c.push({name:"iSortCol_"+f,value:a.aaSortingFixed[f][0]}),c.push({name:"sSortDir_"+f,value:a.aaSortingFixed[f][1]});for(f=0;f<g;f++)c.push({name:"iSortCol_"+(f+d),value:a.aaSorting[f][0]}),c.push({name:"sSortDir_"+(f+d),value:a.aaSorting[f][1]});for(f=0;f<b;f++)c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(b){G(a,b)});return!1}else return!0}function G(a,b){if(typeof b.sEcho!="undefined")if(b.sEcho*1<a.iDraw)return;else a.iDraw=b.sEcho*1;ba(a);a._iRecordsTotal=b.iTotalRecords;a._iRecordsDisplay=b.iTotalDisplayRecords;var c=aa(a);if(c=typeof b.sColumns!="undefined"&&c!==""&&b.sColumns!=c)var f=ma(a,b.sColumns);for(var d=0,g=b.aaData.length;d<g;d++)if(c){for(var e=[],k=0,h=a.aoColumns.length;k<h;k++)e.push(b.aaData[d][f[k]]);v(a,e)}else v(a,b.aaData[d]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;y(a);a.bAjaxDataGet=!0;L(a,!1)}function R(a){var b=j.createElement("div");a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=j.createElement("div");a.nTableWrapper.className=a.oClasses.sWrapper;a.sTableId!==""&&a.nTableWrapper.setAttribute("id",a.sTableId+"_wrapper");for(var c=a.nTableWrapper,f=a.sDom.split(""),d,g,e,k,l,i,o,m=0;m<f.length;m++){g=0;e=f[m];if(e=="<"){k=j.createElement("div");l=f[m+1];if(l=="'"||l=='"'){i="";for(o=2;f[m+o]!=l;)i+=f[m+o],o++;i=="H"?i="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix":i=="F"&&(i="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix");i.indexOf(".")!=-1?(l=i.split("."),k.setAttribute("id",l[0].substr(1,l[0].length-1)),k.className=l[1]):i.charAt(0)=="#"?k.setAttribute("id",i.substr(1,i.length-1)):k.className=i;m+=o}c.appendChild(k);c=k}else if(e==">")c=c.parentNode;else if(e=="l"&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)d=na(a),g=1;else if(e=="f"&&a.oFeatures.bFilter)d=H(a),g=1;else if(e=="r"&&a.oFeatures.bProcessing)d=oa(a),g=1;else if(e=="t")d=I(a),g=1;else if(e=="i"&&a.oFeatures.bInfo)d=pa(a),g=1;else if(e=="p"&&a.oFeatures.bPaginate)d=qa(a),g=1;else if(h.aoFeatures.length!==0){k=h.aoFeatures;o=0;for(l=k.length;o<l;o++)if(e==k[o].cFeature){if(d=k[o].fnInit(a))g=1;break}}g==1&&d!==null&&(typeof a.aanFeatures[e]!="object"&&(a.aanFeatures[e]=[]),a.aanFeatures[e].push(d),c.appendChild(d))}b.parentNode.replaceChild(a.nTableWrapper,b)}function I(a){if(a.oScroll.sX===""&&a.oScroll.sY==="")return a.nTable;var b=j.createElement("div"),c=j.createElement("div"),f=j.createElement("div"),p=j.createElement("div"),g=j.createElement("div"),l=j.createElement("div"),k=a.nTable.cloneNode(!1),i=a.nTable.cloneNode(!1),o=a.nTable.getElementsByTagName("thead")[0],m=a.nTable.getElementsByTagName("tfoot").length===0?null:a.nTable.getElementsByTagName("tfoot")[0],z=typeof e.bJQueryUI!="undefined"&&e.bJQueryUI?h.oJUIClasses:h.oStdClasses;c.appendChild(f);g.appendChild(l);p.appendChild(a.nTable);b.appendChild(c);b.appendChild(p);f.appendChild(k);k.appendChild(o);m!==null&&(b.appendChild(g),l.appendChild(i),i.appendChild(m));b.className=z.sScrollWrapper;c.className=z.sScrollHead;f.className=z.sScrollHeadInner;p.className=z.sScrollBody;g.className=z.sScrollFoot;l.className=z.sScrollFootInner;c.style.overflow="hidden";g.style.overflow="hidden";p.style.overflow="auto";c.style.border="0";g.style.border="0";f.style.width="150%";k.removeAttribute("id");k.style.marginLeft="0";a.nTable.style.marginLeft="0";if(m!==null)i.removeAttribute("id"),i.style.marginLeft="0";f=d(">caption",a.nTable);l=0;for(i=f.length;l<i;l++)k.appendChild(f[l]);if(a.oScroll.sX!==""){c.style.width=t(a.oScroll.sX);p.style.width=t(a.oScroll.sX);if(m!==null)g.style.width=t(a.oScroll.sX);d(p).scroll(function(){c.scrollLeft=this.scrollLeft;if(m!==null)g.scrollLeft=this.scrollLeft})}if(a.oScroll.sY!=="")p.style.height=t(a.oScroll.sY);a.aoDrawCallback.push({fn:r,sName:"scrolling"});a.oScroll.bInfinite&&d(p).scroll(function(){!a.bDrawing&&d(this).scrollTop()+d(this).height()>d(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(ca(a,"next"),E(a),y(a))});a.nScrollHead=c;a.nScrollFoot=g;return b}function r(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],f=a.nTable.parentNode,e,g,h,k,l,i,j,o,m=[];h=a.nTable.getElementsByTagName("thead");h.length>0&&a.nTable.removeChild(h[0]);a.nTFoot!==null&&(l=a.nTable.getElementsByTagName("tfoot"),l.length>0&&a.nTable.removeChild(l[0]));h=a.nTHead.cloneNode(!0);a.nTable.insertBefore(h,a.nTable.childNodes[0]);a.nTFoot!==null&&(l=a.nTFoot.cloneNode(!0),a.nTable.insertBefore(l,a.nTable.childNodes[1]));var z=da(h);e=0;for(g=z.length;e<g;e++)j=ea(a,e),z[e].style.width=a.aoColumns[j].sWidth;a.nTFoot!==null&&M(function(a){a.style.width=""},l.getElementsByTagName("tr"));e=d(a.nTable).outerWidth();if(a.oScroll.sX===""){if(a.nTable.style.width="100%",d.browser.msie&&d.browser.version<=7)a.nTable.style.width=t(d(a.nTable).outerWidth()-a.oScroll.iBarWidth)}else if(a.oScroll.sXInner!=="")a.nTable.style.width=t(a.oScroll.sXInner);else if(e==d(f).width()&&d(f).height()<d(a.nTable).height()){if(a.nTable.style.width=t(e-a.oScroll.iBarWidth),d(a.nTable).outerWidth()>e-a.oScroll.iBarWidth)a.nTable.style.width=t(e)}else a.nTable.style.width=t(e);e=d(a.nTable).outerWidth();g=a.nTHead.getElementsByTagName("tr");h=h.getElementsByTagName("tr");M(function(a,b){i=a.style;i.paddingTop="0";i.paddingBottom="0";i.borderTopWidth="0";i.borderBottomWidth="0";i.height=0;o=d(a).width();b.style.width=t(o);m.push(o)},h,g);a.nTFoot!==null&&(k=l.getElementsByTagName("tr"),l=a.nTFoot.getElementsByTagName("tr"),M(function(a,b){i=a.style;i.paddingTop="0";i.paddingBottom="0";i.borderTopWidth="0";i.borderBottomWidth="0";o=d(a).width();b.style.width=t(o);m.push(o)},k,l));M(function(a){a.innerHTML="";a.style.width=t(m.shift())},h);a.nTFoot!==null&&M(function(a){a.innerHTML="";a.style.width=t(m.shift())},k);d(a.nTable).outerWidth()<e&&(a.oScroll.sX===""?J(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn"):a.oScroll.sXInner!==""&&J(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation"));if(a.oScroll.sY===""&&d.browser.msie&&d.browser.version<=7)f.style.height=t(a.nTable.offsetHeight+a.oScroll.iBarWidth);if(a.oScroll.sY!==""&&a.oScroll.bCollapse&&(f.style.height=t(a.oScroll.sY),k=a.oScroll.sX!==""&&a.nTable.offsetWidth>f.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<f.offsetHeight))f.style.height=t(d(a.nTable).height()+k);c.style.width=t(d(a.nTable).outerWidth());b.style.width=t(d(a.nTable).outerWidth()+a.oScroll.iBarWidth);if(a.nTFoot!==null)b=a.nScrollFoot.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],b.style.width=t(a.nTable.offsetWidth+a.oScroll.iBarWidth),c.style.width=t(a.nTable.offsetWidth);if(a.bSorted||a.bFiltered)f.scrollTop=0}function N(a){if(a.oFeatures.bAutoWidth===!1)return!1;Y(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function H(a){var b=j.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.f=="undefined"&&b.setAttribute("id",a.sTableId+"_filter");b.className=a.oClasses.sFilter;b.innerHTML=a.oLanguage.sSearch+(a.oLanguage.sSearch===""?"":" ")+'<input type="text" />';var c=d("input",b);c.val(a.oPreviousSearch.sSearch.replace('"',"&quot;"));c.keyup(function(){for(var b=a.aanFeatures.f,c=0,g=b.length;c<g;c++)b[c]!=this.parentNode&&d("input",b[c]).val(this.value);l(a,{sSearch:this.value,bRegex:a.oPreviousSearch.bRegex,bSmart:a.oPreviousSearch.bSmart})});c.keypress(function(a){if(a.keyCode==13)return!1});return b}function l(a,b,c){ra(a,b.sSearch,c,b.bRegex,b.bSmart);for(b=0;b<a.aoPreSearchCols.length;b++)z(a,a.aoPreSearchCols[b].sSearch,b,a.aoPreSearchCols[b].bRegex,a.aoPreSearchCols[b].bSmart);h.afnFiltering.length!==0&&o(a);a.bFiltered=!0;a._iDisplayStart=0;E(a);y(a);P(a,0)}function o(a){for(var b=h.afnFiltering,c=0,f=b.length;c<f;c++)for(var d=0,g=0,e=a.aiDisplay.length;g<e;g++){var k=a.aiDisplay[g-d];b[c](a,a.aoData[k]._aData,k)||(a.aiDisplay.splice(g-d,1),d++)}}function z(a,b,c,f,d){if(b!=="")for(var g=0,b=fa(b,f,d),f=a.aiDisplay.length-1;f>=0;f--)d=ga(a.aoData[a.aiDisplay[f]]._aData[c],a.aoColumns[c].sType),b.test(d)||(a.aiDisplay.splice(f,1),g++)}function ra(a,b,c,f,d){var g=fa(b,f,d);if(typeof c=="undefined"||c===null)c=0;h.afnFiltering.length!==0&&(c=1);if(b.length<=0)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||a.oPreviousSearch.sSearch.length>b.length||c==1||b.indexOf(a.oPreviousSearch.sSearch)!==0){a.aiDisplay.splice(0,a.aiDisplay.length);P(a,1);for(c=0;c<a.aiDisplayMaster.length;c++)g.test(a.asDataSearch[c])&&a.aiDisplay.push(a.aiDisplayMaster[c])}else for(var e=0,c=0;c<a.asDataSearch.length;c++)g.test(a.asDataSearch[c])||(a.aiDisplay.splice(c-e,1),e++);a.oPreviousSearch.sSearch=b;a.oPreviousSearch.bRegex=f;a.oPreviousSearch.bSmart=d}function P(a,b){a.asDataSearch.splice(0,a.asDataSearch.length);for(var c=j.createElement("div"),b=typeof b!="undefined"&&b==1?a.aiDisplayMaster:a.aiDisplay,f=0,d=b.length;f<d;f++){a.asDataSearch[f]="";for(var g=0,e=a.aoColumns.length;g<e;g++)a.aoColumns[g].bSearchable&&(a.asDataSearch[f]+=ga(a.aoData[b[f]]._aData[g],a.aoColumns[g].sType)+" ");if(a.asDataSearch[f].indexOf("&")!==-1)c.innerHTML=a.asDataSearch[f],a.asDataSearch[f]=c.textContent?c.textContent:c.innerText,a.asDataSearch[f]=a.asDataSearch[f].replace(/\n/g," ").replace(/\r/g,"")}}function fa(a,b,c){c?(a=b?a.split(" "):ha(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$"):a=b?a:ha(a);return RegExp(a,"i")}function ga(a,b){if(typeof h.ofnSearch[b]=="function")return h.ofnSearch[b](a);else if(b=="html")return a.replace(/\n/g," ").replace(/<.*?>/g,"");else if(typeof a=="string")return a.replace(/\n/g," ");return a}function s(a,b){var c=[],f=h.oSort,d=a.aoData,g,e,k,j;if(!a.oFeatures.bServerSide&&(a.aaSorting.length!==0||a.aaSortingFixed!==null)){c=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(k=0;k<c.length;k++)if(g=c[k][0],e=O(a,g),j=a.aoColumns[g].sSortDataType,typeof h.afnSortData[j]!="undefined"){var o=h.afnSortData[j](a,g,e);e=0;for(j=d.length;e<j;e++)d[e]._aData[g]=o[e]}if(i.runtime){var m=[],z=c.length;for(k=0;k<z;k++)g=a.aoColumns[c[k][0]].iDataSort,m.push([g,a.aoColumns[g].sType+"-"+c[k][1]]);a.aiDisplayMaster.sort(function(a,b){for(var c,g=0;g<z;g++)if(c=f[m[g][1]](d[a]._aData[m[g][0]],d[b]._aData[m[g][0]]),c!==0)return c;return 0})}else{this.ClosureDataTables={fn:function(){},data:d,sort:h.oSort};j="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data;";for(k=0;k<c.length-1;k++)g=a.aoColumns[c[k][0]].iDataSort,e=a.aoColumns[g].sType,j+="iTest = oSort['"+e+"-"+c[k][1]+"']( aoData[a]._aData["+g+"], aoData[b]._aData["+g+"] ); if ( iTest === 0 )";if(c.length>0)g=a.aoColumns[c[c.length-1][0]].iDataSort,e=a.aoColumns[g].sType,j+="iTest = oSort['"+e+"-"+c[c.length-1][1]+"']( aoData[a]._aData["+g+"], aoData[b]._aData["+g+"] );if (iTest===0) return oSort['numeric-"+c[c.length-1][1]+"'](a, b); return iTest;}",eval(j),a.aiDisplayMaster.sort(this.ClosureDataTables.fn);this.ClosureDataTables=void 0}}(typeof b=="undefined"||b)&&V(a);a.bSorted=!0;a.oFeatures.bFilter?l(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,E(a),y(a))}function $(a,b,c,f){d(b).click(function(b){if(a.aoColumns[c].bSortable!==!1){var g=function(){var g,f;if(b.shiftKey){for(var d=!1,e=0;e<a.aaSorting.length;e++)if(a.aaSorting[e][0]==c){d=!0;g=a.aaSorting[e][0];f=a.aaSorting[e][2]+1;typeof a.aoColumns[g].asSorting[f]=="undefined"?a.aaSorting.splice(e,1):(a.aaSorting[e][1]=a.aoColumns[g].asSorting[f],a.aaSorting[e][2]=f);break}d===!1&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else a.aaSorting.length==1&&a.aaSorting[0][0]==c?(g=a.aaSorting[0][0],f=a.aaSorting[0][2]+1,typeof a.aoColumns[g].asSorting[f]=="undefined"&&(f=0),a.aaSorting[0][1]=a.aoColumns[g].asSorting[f],a.aaSorting[0][2]=f):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));s(a)};a.oFeatures.bProcessing?(L(a,!0),setTimeout(function(){g();a.oFeatures.bServerSide||L(a,!1)},0)):g();typeof f=="function"&&f(a)}})}function V(a){var b,c,f,e,g,h=a.aoColumns.length,k=a.oClasses;for(b=0;b<h;b++)a.aoColumns[b].bSortable&&d(a.aoColumns[b].nTh).removeClass(k.sSortAsc+" "+k.sSortDesc+" "+a.aoColumns[b].sSortingClass);e=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;f=-1;for(c=0;c<e.length;c++)if(e[c][0]==b){g=e[c][1]=="asc"?k.sSortAsc:k.sSortDesc;f=c;break}d(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(c=d("span",a.aoColumns[b].nTh),c.removeClass(k.sSortJUIAsc+" "+k.sSortJUIDesc+" "+k.sSortJUI+" "+k.sSortJUIAscAllowed+" "+k.sSortJUIDescAllowed),c.addClass(f==-1?a.aoColumns[b].sSortingClassJUI:e[f][1]=="asc"?k.sSortJUIAsc:k.sSortJUIDesc))}else d(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);g=k.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){f=W(a);if(f.length>=h)for(b=0;b<h;b++)if(f[b].className.indexOf(g+"1")!=-1){c=0;for(a=f.length/h;c<a;c++)f[h*c+b].className=d.trim(f[h*c+b].className.replace(g+"1",""))}else if(f[b].className.indexOf(g+"2")!=-1){c=0;for(a=f.length/h;c<a;c++)f[h*c+b].className=d.trim(f[h*c+b].className.replace(g+"2",""))}else if(f[b].className.indexOf(g+"3")!=-1){c=0;for(a=f.length/h;c<a;c++)f[h*c+b].className=d.trim(f[h*c+b].className.replace(" "+g+"3",""))}var k=1,l;for(b=0;b<e.length;b++){l=parseInt(e[b][0],10);c=0;for(a=f.length/h;c<a;c++)f[h*c+l].className+=" "+g+k;k<3&&k++}}}function qa(a){if(a.oScroll.bInfinite)return null;var b=j.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;h.oPagination[a.sPaginationType].fnInit(a,b,function(a){E(a);y(a)});typeof a.aanFeatures.p=="undefined"&&a.aoDrawCallback.push({fn:function(a){h.oPagination[a.sPaginationType].fnUpdate(a,function(a){E(a);y(a)})},sName:"pagination"});return b}function ca(a,b){var c=a._iDisplayStart;if(b=="first")a._iDisplayStart=0;else if(b=="previous"){if(a._iDisplayStart=a._iDisplayLength>=0?a._iDisplayStart-a._iDisplayLength:0,a._iDisplayStart<0)a._iDisplayStart=0}else b=="next"?a._iDisplayLength>=0?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0:b=="last"?a._iDisplayLength>=0?(b=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1,a._iDisplayStart=(b-1)*a._iDisplayLength):a._iDisplayStart=0:J(a,0,"Unknown paging action: "+b);return c!=a._iDisplayStart}function pa(a){var b=j.createElement("div");b.className=a.oClasses.sInfo;typeof a.aanFeatures.i=="undefined"&&(a.aoDrawCallback.push({fn:sa,sName:"information"}),a.sTableId!==""&&b.setAttribute("id",a.sTableId+"_info"));return b}function sa(a){if(a.oFeatures.bInfo&&a.aanFeatures.i.length!==0){var b=a._iDisplayStart+1,c=a.fnDisplayEnd(),f=a.fnRecordsTotal(),e=a.fnRecordsDisplay(),g=a.fnFormatNumber(b),h=a.fnFormatNumber(c),k=a.fnFormatNumber(f),l=a.fnFormatNumber(e);a.oScroll.bInfinite&&(g=a.fnFormatNumber(1));g=a.fnRecordsDisplay()===0&&a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfoEmpty+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()===0?a.oLanguage.sInfoEmpty+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",k)+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfo.replace("_START_",g).replace("_END_",h).replace("_TOTAL_",l)+a.oLanguage.sInfoPostFix:a.oLanguage.sInfo.replace("_START_",g).replace("_END_",h).replace("_TOTAL_",l)+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()))+a.oLanguage.sInfoPostFix;a.oLanguage.fnInfoCallback!==null&&(g=a.oLanguage.fnInfoCallback(a,b,c,f,e,g));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++)d(a[b]).html(g)}}function na(a){if(a.oScroll.bInfinite)return null;var b='<select size="1" '+(a.sTableId===""?"":'name="'+a.sTableId+'_length"')+">",c,f;if(a.aLengthMenu.length==2&&typeof a.aLengthMenu[0]=="object"&&typeof a.aLengthMenu[1]=="object"){c=0;for(f=a.aLengthMenu[0].length;c<f;c++)b+='<option value="'+a.aLengthMenu[0][c]+'">'+a.aLengthMenu[1][c]+"</option>"}else{c=0;for(f=a.aLengthMenu.length;c<f;c++)b+='<option value="'+a.aLengthMenu[c]+'">'+a.aLengthMenu[c]+"</option>"}b+="</select>";var e=j.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.l=="undefined"&&e.setAttribute("id",a.sTableId+"_length");e.className=a.oClasses.sLength;e.innerHTML=a.oLanguage.sLengthMenu.replace("_MENU_",b);d('select option[value="'+a._iDisplayLength+'"]',e).attr("selected",!0);d("select",e).change(function(){var b=d(this).val(),e=a.aanFeatures.l;c=0;for(f=e.length;c<f;c++)e[c]!=this.parentNode&&d("select",e[c]).val(b);a._iDisplayLength=parseInt(b,10);E(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0))a._iDisplayStart=0;if(a._iDisplayLength==-1)a._iDisplayStart=0;y(a)});return e}function oa(a){var b=j.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.r=="undefined"&&b.setAttribute("id",a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function L(a,b){if(a.oFeatures.bProcessing)for(var a=a.aanFeatures.r,c=0,f=a.length;c<f;c++)a[c].style.visibility=b?"visible":"hidden"}function ea(a,b){for(var c=-1,f=0;f<a.aoColumns.length;f++)if(a.aoColumns[f].bVisible===!0&&c++,c==b)return f;return null}function O(a,b){for(var c=-1,f=0;f<a.aoColumns.length;f++)if(a.aoColumns[f].bVisible===!0&&c++,f==b)return a.aoColumns[f].bVisible===!0?c:null;return null}function Q(a,b){var c,f;c=a._iDisplayStart;for(f=a._iDisplayEnd;c<f;c++)if(a.aoData[a.aiDisplay[c]].nTr==b)return a.aiDisplay[c];c=0;for(f=a.aoData.length;c<f;c++)if(a.aoData[c].nTr==b)return c;return null}function T(a){for(var b=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible===!0&&b++;return b}function E(a){a._iDisplayEnd=a.oFeatures.bPaginate===!1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||a._iDisplayLength==-1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function ta(a,b){if(!a||a===null||a==="")return 0;typeof b=="undefined"&&(b=j.getElementsByTagName("body")[0]);var c=j.createElement("div");c.style.width=a;b.appendChild(c);a=c.offsetWidth;b.removeChild(c);return a}function Y(a){var b=0,c,f=0,e=a.aoColumns.length,g,h=d("th",a.nTHead);for(g=0;g<e;g++)if(a.aoColumns[g].bVisible&&(f++,a.aoColumns[g].sWidth!==null)){c=ta(a.aoColumns[g].sWidthOrig,a.nTable.parentNode);if(c!==null)a.aoColumns[g].sWidth=t(c);b++}if(e==h.length&&b===0&&f==e&&a.oScroll.sX===""&&a.oScroll.sY==="")for(g=0;g<a.aoColumns.length;g++){if(c=d(h[g]).width(),c!==null)a.aoColumns[g].sWidth=t(c)}else{b=a.nTable.cloneNode(!1);g=j.createElement("tbody");c=j.createElement("tr");b.removeAttribute("id");b.appendChild(a.nTHead.cloneNode(!0));a.nTFoot!==null&&(b.appendChild(a.nTFoot.cloneNode(!0)),M(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(g);g.appendChild(c);g=d("thead th",b);g.length===0&&(g=d("tbody tr:eq(0)>td",b));g.each(function(b){this.style.width="";b=ea(a,b);if(b!==null&&a.aoColumns[b].sWidthOrig!=="")this.style.width=a.aoColumns[b].sWidthOrig});for(g=0;g<e;g++)a.aoColumns[g].bVisible&&(f=ua(a,g),f!==null&&(f=f.cloneNode(!0),c.appendChild(f)));g=a.nTable.parentNode;g.appendChild(b);if(a.oScroll.sX!==""&&a.oScroll.sXInner!=="")b.style.width=t(a.oScroll.sXInner);else if(a.oScroll.sX!==""){if(b.style.width="",d(b).width()<g.offsetWidth)b.style.width=t(g.offsetWidth)}else if(a.oScroll.sY!=="")b.style.width=t(g.offsetWidth);b.style.visibility="hidden";va(a,b);e=d("tbody tr:eq(0)>td",b);e.length===0&&(e=d("thead tr:eq(0)>th",b));for(g=c=0;g<a.aoColumns.length;g++)if(a.aoColumns[g].bVisible){f=d(e[c]).width();if(f!==null&&f>0)a.aoColumns[g].sWidth=t(f);c++}a.nTable.style.width=t(d(b).outerWidth());b.parentNode.removeChild(b)}}function va(a,b){if(a.oScroll.sX===""&&a.oScroll.sY!=="")d(b).width(),b.style.width=t(d(b).outerWidth()-a.oScroll.iBarWidth);else if(a.oScroll.sX!=="")b.style.width=t(d(b).outerWidth())}function ua(a,b,c){if(typeof c=="undefined"||c){c=wa(a,b);b=O(a,b);if(c<0)return null;return a.aoData[c].nTr.getElementsByTagName("td")[b]}var f=-1,d,g,c=-1,e=j.createElement("div");e.style.visibility="hidden";e.style.position="absolute";j.body.appendChild(e);d=0;for(g=a.aoData.length;d<g;d++)if(e.innerHTML=a.aoData[d]._aData[b],e.offsetWidth>f)f=e.offsetWidth,c=d;j.body.removeChild(e);if(c>=0&&(b=O(a,b),a=a.aoData[c].nTr.getElementsByTagName("td")[b]))return a;return null}function wa(a,b){for(var c=-1,f=-1,d=0;d<a.aoData.length;d++){var g=a.aoData[d]._aData[b];if(g.length>c)c=g.length,f=d}return f}function t(a){if(a===null)return"0px";if(typeof a=="number"){if(a<0)return"0px";return a+"px"}if(a.indexOf("em")!=-1||a.indexOf("%")!=-1||a.indexOf("ex")!=-1||a.indexOf("px")!=-1)return a;return a+"px"}function Z(a){for(var b=h.aTypes,c=b.length,f=0;f<c;f++){var d=b[f](a);if(d!==null)return d}return"string"}function C(a){for(var b=0;b<n.length;b++)if(n[b].nTable==a)return n[b];return null}function U(a){for(var b=[],c=a.aoData.length,f=0;f<c;f++)b.push(a.aoData[f]._aData);return b}function S(a){for(var b=[],c=a.aoData.length,f=0;f<c;f++)b.push(a.aoData[f].nTr);return b}function W(a){var b=S(a),c=[],f,d=[],g,e,h,l;g=0;for(e=b.length;g<e;g++){c=[];h=0;for(l=b[g].childNodes.length;h<l;h++)f=b[g].childNodes[h],f.nodeName.toUpperCase()=="TD"&&c.push(f);h=f=0;for(l=a.aoColumns.length;h<l;h++)a.aoColumns[h].bVisible?d.push(c[h-f]):(d.push(a.aoData[g]._anHidden[h]),f++)}return d}function ha(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)","g"),"\\$1")}function ia(a,b){for(var c=-1,f=0,d=a.length;f<d;f++)a[f]==b?c=f:a[f]>b&&a[f]--;c!=-1&&a.splice(c,1)}function ma(a,b){for(var b=b.split(","),c=[],f=0,d=a.aoColumns.length;f<d;f++)for(var g=0;g<d;g++)if(a.aoColumns[f].sName==b[g]){c.push(g);break}return c}function aa(a){for(var b="",c=0,f=a.aoColumns.length;c<f;c++)b+=a.aoColumns[c].sName+",";if(b.length==f)return"";return b.slice(0,-1)}function J(a,b,c){a=a.sTableId===""?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(b===0)if(h.sErrMode=="alert")alert(a);else throw a;else typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(a)}function ba(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);E(a)}function ja(a){if(a.oFeatures.bStateSave&&typeof a.bDestroying=="undefined"){var b,c="{";c+='"iCreate":'+(new Date).getTime()+",";c+='"iStart":'+a._iDisplayStart+",";c+='"iEnd":'+a._iDisplayEnd+",";c+='"iLength":'+a._iDisplayLength+",";c+='"sFilter":"'+encodeURIComponent(a.oPreviousSearch.sSearch)+'",';c+='"sFilterEsc":'+!a.oPreviousSearch.bRegex+",";c+='"aaSorting":[';for(b=0;b<a.aaSorting.length;b++)c+="["+a.aaSorting[b][0]+',"'+a.aaSorting[b][1]+'"],';c=c.substring(0,c.length-1);c+="],";c+='"aaSearchCols":[';for(b=0;b<a.aoPreSearchCols.length;b++)c+='["'+encodeURIComponent(a.aoPreSearchCols[b].sSearch)+'",'+!a.aoPreSearchCols[b].bRegex+"],";c=c.substring(0,c.length-1);c+="],";c+='"abVisCols":[';for(b=0;b<a.aoColumns.length;b++)c+=a.aoColumns[b].bVisible+",";c=c.substring(0,c.length-1);c+="]";c+="}";xa(a.sCookiePrefix+a.sInstance,c,a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)}}function ya(a,b){if(a.oFeatures.bStateSave){var c,f=ka(a.sCookiePrefix+a.sInstance);if(f!==null&&f!==""){try{c=typeof d.parseJSON=="function"?d.parseJSON(f.replace(/'/g,'"')):eval("("+f+")")}catch(e){return}a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.oPreviousSearch.sSearch=decodeURIComponent(c.sFilter);a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();if(typeof c.sFilterEsc!="undefined")a.oPreviousSearch.bRegex=!c.sFilterEsc;if(typeof c.aaSearchCols!="undefined")for(f=0;f<c.aaSearchCols.length;f++)a.aoPreSearchCols[f]={sSearch:decodeURIComponent(c.aaSearchCols[f][0]),bRegex:!c.aaSearchCols[f][1]};if(typeof c.abVisCols!="undefined"){b.saved_aoColumns=[];for(f=0;f<c.abVisCols.length;f++)b.saved_aoColumns[f]={},b.saved_aoColumns[f].bVisible=c.abVisCols[f]}}}}function xa(a,b,c,f,e){var g=new Date;g.setTime(g.getTime()+c*1E3);var c=i.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),h;e!==null?(h=typeof d.parseJSON=="function"?d.parseJSON(b):eval("("+b+")"),b=e(a,h,g.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+g.toGMTString()+"; path="+c.join("/")+"/";e="";g=9999999999999;if((ka(a)!==null?j.cookie.length:b.length+j.cookie.length)+10>4096){for(var a=j.cookie.split(";"),l=0,o=a.length;l<o;l++)if(a[l].indexOf(f)!=-1){var m=a[l].split("=");try{h=eval("("+decodeURIComponent(m[1])+")")}catch(z){continue}if(typeof h.iCreate!="undefined"&&h.iCreate<g)e=m[0],g=h.iCreate}if(e!=="")j.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}j.cookie=b}function ka(a){for(var b=i.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=j.cookie.split(";"),c=0;c<b.length;c++){for(var f=b[c];f.charAt(0)==" ";)f=f.substring(1,f.length);if(f.indexOf(a)===0)return decodeURIComponent(f.substring(a.length,f.length))}return null}function da(a){a=a.getElementsByTagName("tr");if(a.length==1)return a[0].getElementsByTagName("th");var b=[],c=[],f,d,g,e,h,l,i=function(a,b,c){for(;typeof a[b][c]!="undefined";)c++;return c},j=function(a){typeof b[a]=="undefined"&&(b[a]=[])};f=0;for(e=a.length;f<e;f++){j(f);var o=0,m=[];d=0;for(h=a[f].childNodes.length;d<h;d++)(a[f].childNodes[d].nodeName.toUpperCase()=="TD"||a[f].childNodes[d].nodeName.toUpperCase()=="TH")&&m.push(a[f].childNodes[d]);d=0;for(h=m.length;d<h;d++){var z=m[d].getAttribute("colspan")*1,n=m[d].getAttribute("rowspan")*1;if(!z||z===0||z===1){l=i(b,f,o);b[f][l]=m[d].nodeName.toUpperCase()=="TD"?4:m[d];if(n||n===0||n===1)for(g=1;g<n;g++)j(f+g),b[f+g][l]=2;o++}else{l=i(b,f,o);for(g=0;g<z;g++)b[f][l+g]=3;o+=z}}}f=0;for(e=b.length;f<e;f++){d=0;for(h=b[f].length;d<h;d++)typeof b[f][d]=="object"&&(c[d]=b[f][d])}return c}function za(){var a=j.createElement("p"),b=a.style;b.width="100%";b.height="200px";var c=j.createElement("div"),b=c.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.overflow="hidden";c.appendChild(a);j.body.appendChild(c);b=a.offsetWidth;c.style.overflow="scroll";a=a.offsetWidth;if(b==a)a=c.clientWidth;j.body.removeChild(c);return b-a}function M(a,b,c){for(var f=0,d=b.length;f<d;f++)for(var g=0,e=b[f].childNodes.length;g<e;g++)b[f].childNodes[g].nodeType==1&&(typeof c!="undefined"?a(b[f].childNodes[g],c[f].childNodes[g]):a(b[f].childNodes[g]))}function m(a,b,c,f){typeof f=="undefined"&&(f=c);typeof b[c]!="undefined"&&(a[f]=b[c])}this.oApi={};this.fnDraw=function(a){var b=C(this[h.iApiIndex]);typeof a!="undefined"&&a===!1?(E(b),y(b)):F(b)};this.fnFilter=function(a,b,c,f,e){var g=C(this[h.iApiIndex]);if(g.oFeatures.bFilter)if(typeof c=="undefined"&&(c=!1),typeof f=="undefined"&&(f=!0),typeof e=="undefined"&&(e=!0),typeof b=="undefined"||b===null){if(l(g,{sSearch:a,bRegex:c,bSmart:f},1),e&&typeof g.aanFeatures.f!="undefined"){b=g.aanFeatures.f;c=0;for(f=b.length;c<f;c++)d("input",b[c]).val(a)}}else g.aoPreSearchCols[b].sSearch=a,g.aoPreSearchCols[b].bRegex=c,g.aoPreSearchCols[b].bSmart=f,l(g,g.oPreviousSearch,1)};this.fnSettings=function(){return C(this[h.iApiIndex])};this.fnVersionCheck=h.fnVersionCheck;this.fnSort=function(a){var b=C(this[h.iApiIndex]);b.aaSorting=a;s(b)};this.fnSortListener=function(a,b,c){$(C(this[h.iApiIndex]),a,b,c)};this.fnAddData=function(a,b){if(a.length===0)return[];var c=[],f,d=C(this[h.iApiIndex]);if(typeof a[0]=="object")for(var g=0;g<a.length;g++){f=v(d,a[g]);if(f==-1)return c;c.push(f)}else{f=v(d,a);if(f==-1)return c;c.push(f)}d.aiDisplay=d.aiDisplayMaster.slice();P(d,1);(typeof b=="undefined"||b)&&F(d);return c};this.fnDeleteRow=function(a,b,c){var f=C(this[h.iApiIndex]),a=typeof a=="object"?Q(f,a):a,d=f.aoData.splice(a,1);ia(f.aiDisplayMaster,a);ia(f.aiDisplay,a);P(f,1);typeof b=="function"&&b.call(this,f,d);if(f._iDisplayStart>=f.aiDisplay.length&&(f._iDisplayStart-=f._iDisplayLength,f._iDisplayStart<0))f._iDisplayStart=0;if(typeof c=="undefined"||c)E(f),y(f);return d};this.fnClearTable=function(a){var b=C(this[h.iApiIndex]);ba(b);(typeof a=="undefined"||a)&&y(b)};this.fnOpen=function(a,b,c){var f=C(this[h.iApiIndex]);this.fnClose(a);var e=j.createElement("tr"),g=j.createElement("td");e.appendChild(g);g.className=c;g.colSpan=T(f);g.innerHTML=b;b=d("tr",f.nTBody);d.inArray(a,b)!=-1&&d(e).insertAfter(a);f.aoOpenRows.push({nTr:e,nParent:a});return e};this.fnClose=function(a){for(var b=C(this[h.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0;return 1};this.fnGetData=function(a){var b=C(this[h.iApiIndex]);if(typeof a!="undefined")return a=typeof a=="object"?Q(b,a):a,b.aoData[a]._aData;return U(b)};this.fnGetNodes=function(a){var b=C(this[h.iApiIndex]);if(typeof a!="undefined")return b.aoData[a].nTr;return S(b)};this.fnGetPosition=function(a){var b=C(this[h.iApiIndex]);if(a.nodeName.toUpperCase()=="TR")return Q(b,a);else if(a.nodeName.toUpperCase()=="TD")for(var c=Q(b,a.parentNode),f=0,d=0;d<b.aoColumns.length;d++)if(b.aoColumns[d].bVisible){if(b.aoData[c].nTr.getElementsByTagName("td")[d-f]==a)return[c,d-f,d]}else f++;return null};this.fnUpdate=function(a,b,c,f,d){var g=C(this[h.iApiIndex]),e=typeof b=="object"?Q(g,b):b;if(typeof a!="object"){if(b=a,g.aoData[e]._aData[c]=b,g.aoColumns[c].fnRender!==null&&(b=g.aoColumns[c].fnRender({iDataRow:e,iDataColumn:c,aData:g.aoData[e]._aData,oSettings:g}),g.aoColumns[c].bUseRendered&&(g.aoData[e]._aData[c]=b)),c=O(g,c),c!==null)g.aoData[e].nTr.getElementsByTagName("td")[c].innerHTML=b}else{if(a.length!=g.aoColumns.length)return J(g,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+g.aoColumns.length),1;for(var l=0;l<a.length;l++)if(b=a[l],g.aoData[e]._aData[l]=b,g.aoColumns[l].fnRender!==null&&(b=g.aoColumns[l].fnRender({iDataRow:e,iDataColumn:l,aData:g.aoData[e]._aData,oSettings:g}),g.aoColumns[l].bUseRendered&&(g.aoData[e]._aData[l]=b)),c=O(g,l),c!==null)g.aoData[e].nTr.getElementsByTagName("td")[c].innerHTML=b}if(typeof d=="undefined"||d)P(g,1),N(g);(typeof f=="undefined"||f)&&F(g);return 0};this.fnSetColumnVis=function(a,b){var c=C(this[h.iApiIndex]),f,e;e=c.aoColumns.length;var g,l;if(c.aoColumns[a].bVisible!=b){g=d(">tr",c.nTHead)[0];var i=d(">tr",c.nTFoot)[0],j=[],o=[];for(f=0;f<e;f++)j.push(c.aoColumns[f].nTh),o.push(c.aoColumns[f].nTf);if(b){for(f=b=0;f<a;f++)c.aoColumns[f].bVisible&&b++;if(b>=T(c)){g.appendChild(j[a]);i&&i.appendChild(o[a]);f=0;for(e=c.aoData.length;f<e;f++)g=c.aoData[f]._anHidden[a],c.aoData[f].nTr.appendChild(g)}else{for(f=a;f<e;f++)if(l=O(c,f),l!==null)break;g.insertBefore(j[a],g.getElementsByTagName("th")[l]);i&&i.insertBefore(o[a],i.getElementsByTagName("th")[l]);W(c);f=0;for(e=c.aoData.length;f<e;f++)g=c.aoData[f]._anHidden[a],c.aoData[f].nTr.insertBefore(g,d(">td:eq("+l+")",c.aoData[f].nTr)[0])}c.aoColumns[a].bVisible=!0}else{g.removeChild(j[a]);i&&i.removeChild(o[a]);l=W(c);f=0;for(e=c.aoData.length;f<e;f++)g=l[f*c.aoColumns.length+a*1],c.aoData[f]._anHidden[a]=g,g.parentNode.removeChild(g);c.aoColumns[a].bVisible=!1}f=0;for(e=c.aoOpenRows.length;f<e;f++)c.aoOpenRows[f].nTr.colSpan=T(c);N(c);y(c);ja(c)}};this.fnPageChange=function(a,b){var c=C(this[h.iApiIndex]);ca(c,a);E(c);(typeof b=="undefined"||b)&&y(c)};this.fnDestroy=function(){var a=C(this[h.iApiIndex]),b=a.nTableWrapper.parentNode,c=a.nTBody,f,e;a.bDestroying=!0;f=0;for(e=a.aoColumns.length;f<e;f++)a.aoColumns[f].bVisible===!1&&this.fnSetColumnVis(f,!0);d("tbody>tr>td."+a.oClasses.sRowEmpty,a.nTable).parent().remove();a.nTable!=a.nTHead.parentNode&&(d(">thead",a.nTable).remove(),a.nTable.appendChild(a.nTHead));a.nTFoot&&a.nTable!=a.nTFoot.parentNode&&(d(">tfoot",a.nTable).remove(),a.nTable.appendChild(a.nTFoot));a.nTable.parentNode.removeChild(a.nTable);d(a.nTableWrapper).remove();a.aaSorting=[];a.aaSortingFixed=[];V(a);d(S(a)).removeClass(a.asStripClasses.join(" "));a.bJUI?(d("th",a.nTHead).removeClass([h.oStdClasses.sSortable,h.oJUIClasses.sSortableAsc,h.oJUIClasses.sSortableDesc,h.oJUIClasses.sSortableNone].join(" ")),d("th span",a.nTHead).remove()):d("th",a.nTHead).removeClass([h.oStdClasses.sSortable,h.oStdClasses.sSortableAsc,h.oStdClasses.sSortableDesc,h.oStdClasses.sSortableNone].join(" "));b.appendChild(a.nTable);f=0;for(e=a.aoData.length;f<e;f++)c.appendChild(a.aoData[f].nTr);d(">tr:even",c).addClass(a.asDestoryStrips[0]);d(">tr:odd",c).addClass(a.asDestoryStrips[1]);f=0;for(e=n.length;f<e;f++)n[f]==a&&n.splice(f,1)};this.fnAdjustColumnSizing=function(a){N(C(this[h.iApiIndex]));(typeof a=="undefined"||a)&&this.fnDraw(!1)};for(var la in h.oApi)la&&(this[la]=K(la));this.oApi._fnExternApiFunc=K;this.oApi._fnInitalise=x;this.oApi._fnLanguageProcess=D;this.oApi._fnAddColumn=A;this.oApi._fnColumnOptions=B;this.oApi._fnAddData=v;this.oApi._fnGatherData=u;this.oApi._fnDrawHead=q;this.oApi._fnDraw=y;this.oApi._fnReDraw=F;this.oApi._fnAjaxUpdate=w;this.oApi._fnAjaxUpdateDraw=G;this.oApi._fnAddOptionsHtml=R;this.oApi._fnFeatureHtmlTable=I;this.oApi._fnScrollDraw=r;this.oApi._fnAjustColumnSizing=N;this.oApi._fnFeatureHtmlFilter=H;this.oApi._fnFilterComplete=l;this.oApi._fnFilterCustom=o;this.oApi._fnFilterColumn=z;this.oApi._fnFilter=ra;this.oApi._fnBuildSearchArray=P;this.oApi._fnFilterCreateSearch=fa;this.oApi._fnDataToSearch=ga;this.oApi._fnSort=s;this.oApi._fnSortAttachListener=$;this.oApi._fnSortingClasses=V;this.oApi._fnFeatureHtmlPaginate=qa;this.oApi._fnPageChange=ca;this.oApi._fnFeatureHtmlInfo=pa;this.oApi._fnUpdateInfo=sa;this.oApi._fnFeatureHtmlLength=na;this.oApi._fnFeatureHtmlProcessing=oa;this.oApi._fnProcessingDisplay=L;this.oApi._fnVisibleToColumnIndex=ea;this.oApi._fnColumnIndexToVisible=O;this.oApi._fnNodeToDataIndex=Q;this.oApi._fnVisbleColumns=T;this.oApi._fnCalculateEnd=E;this.oApi._fnConvertToWidth=ta;this.oApi._fnCalculateColumnWidths=Y;this.oApi._fnScrollingWidthAdjust=va;this.oApi._fnGetWidestNode=ua;this.oApi._fnGetMaxLenString=wa;this.oApi._fnStringToCss=t;this.oApi._fnArrayCmp=function(a,b){if(a.length!=b.length)return 1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return 2;return 0};this.oApi._fnDetectType=Z;this.oApi._fnSettingsFromNode=C;this.oApi._fnGetDataMaster=U;this.oApi._fnGetTrNodes=S;this.oApi._fnGetTdNodes=W;this.oApi._fnEscapeRegex=ha;this.oApi._fnDeleteIndex=ia;this.oApi._fnReOrderIndex=ma;this.oApi._fnColumnOrdering=aa;this.oApi._fnLog=J;this.oApi._fnClearTable=ba;this.oApi._fnSaveState=ja;this.oApi._fnLoadState=ya;this.oApi._fnCreateCookie=xa;this.oApi._fnReadCookie=ka;this.oApi._fnGetUniqueThs=da;this.oApi._fnScrollBarWidth=za;this.oApi._fnApplyToChildren=M;this.oApi._fnMap=m;var Aa=this;return this.each(function(){var a=0,b,c,f,l,a=0;for(b=n.length;a<b;a++){if(n[a].nTable==this)if(typeof e=="undefined"||typeof e.bRetrieve!="undefined"&&e.bRetrieve===!0)return n[a].oInstance;else if(typeof e.bDestroy!="undefined"&&e.bDestroy===!0){n[a].oInstance.fnDestroy();break}else{J(n[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}if(n[a].sTableId!==""&&n[a].sTableId==this.getAttribute("id")){n.splice(a,1);break}}var g=new X;n.push(g);var i=!1,k=!1,a=this.getAttribute("id");a!==null?(g.sTableId=a,g.sInstance=a):g.sInstance=h._oExternConfig.iNextUnique++;g.oInstance=Aa;g.nTable=this;g.oApi=Aa.oApi;if(typeof e!="undefined"&&e!==null){g.oInit=e;m(g.oFeatures,e,"bPaginate");m(g.oFeatures,e,"bLengthChange");m(g.oFeatures,e,"bFilter");m(g.oFeatures,e,"bSort");m(g.oFeatures,e,"bInfo");m(g.oFeatures,e,"bProcessing");m(g.oFeatures,e,"bAutoWidth");m(g.oFeatures,e,"bSortClasses");m(g.oFeatures,e,"bServerSide");m(g.oScroll,e,"sScrollX","sX");m(g.oScroll,e,"sScrollXInner","sXInner");m(g.oScroll,e,"sScrollY","sY");m(g.oScroll,e,"bScrollCollapse","bCollapse");m(g.oScroll,e,"bScrollInfinite","bInfinite");m(g.oScroll,e,"iScrollLoadGap","iLoadGap");m(g,e,"asStripClasses");m(g,e,"fnRowCallback");m(g,e,"fnHeaderCallback");m(g,e,"fnFooterCallback");m(g,e,"fnCookieCallback");m(g,e,"fnInitComplete");m(g,e,"fnServerData");m(g,e,"fnFormatNumber");m(g,e,"aaSorting");m(g,e,"aaSortingFixed");m(g,e,"aLengthMenu");m(g,e,"sPaginationType");m(g,e,"sAjaxSource");m(g,e,"iCookieDuration");m(g,e,"sCookiePrefix");m(g,e,"sDom");m(g,e,"oSearch","oPreviousSearch");m(g,e,"aoSearchCols","aoPreSearchCols");m(g,e,"iDisplayLength","_iDisplayLength");m(g,e,"bJQueryUI","bJUI");m(g.oLanguage,e,"fnInfoCallback");typeof e.fnDrawCallback=="function"&&g.aoDrawCallback.push({fn:e.fnDrawCallback,sName:"user"});g.oFeatures.bServerSide&&g.oFeatures.bSort&&g.oFeatures.bSortClasses&&g.aoDrawCallback.push({fn:V,sName:"server_side_sort_classes"});if(typeof e.bJQueryUI!="undefined"&&e.bJQueryUI&&(g.oClasses=h.oJUIClasses,typeof e.sDom=="undefined"))g.sDom='<"H"lfr>t<"F"ip>';if(g.oScroll.sX!==""||g.oScroll.sY!=="")g.oScroll.iBarWidth=za();if(typeof e.iDisplayStart!="undefined"&&typeof g.iInitDisplayStart=="undefined")g.iInitDisplayStart=e.iDisplayStart,g._iDisplayStart=e.iDisplayStart;if(typeof e.bStateSave!="undefined")g.oFeatures.bStateSave=e.bStateSave,ya(g,e),g.aoDrawCallback.push({fn:ja,sName:"state_save"});typeof e.aaData!="undefined"&&(k=!0);if(typeof e!="undefined"&&typeof e.aoData!="undefined")e.aoColumns=e.aoData;if(typeof e.oLanguage!="undefined")typeof e.oLanguage.sUrl!="undefined"&&e.oLanguage.sUrl!==""?(g.oLanguage.sUrl=e.oLanguage.sUrl,d.getJSON(g.oLanguage.sUrl,null,function(a){D(g,a,!0)}),i=!0):D(g,e.oLanguage,!1)}else e={};typeof e.asStripClasses=="undefined"&&(g.asStripClasses.push(g.oClasses.sStripOdd),g.asStripClasses.push(g.oClasses.sStripEven));c=!1;f=d("tbody>tr",this);a=0;for(b=g.asStripClasses.length;a<b;a++)if(f.filter(":lt(2)").hasClass(g.asStripClasses[a])){c=!0;break}if(c)g.asDestoryStrips=["",""],d(f[0]).hasClass(g.oClasses.sStripOdd)&&(g.asDestoryStrips[0]+=g.oClasses.sStripOdd+" "),d(f[0]).hasClass(g.oClasses.sStripEven)&&(g.asDestoryStrips[0]+=g.oClasses.sStripEven),d(f[1]).hasClass(g.oClasses.sStripOdd)&&(g.asDestoryStrips[1]+=g.oClasses.sStripOdd+" "),d(f[1]).hasClass(g.oClasses.sStripEven)&&(g.asDestoryStrips[1]+=g.oClasses.sStripEven),f.removeClass(g.asStripClasses.join(" "));a=this.getElementsByTagName("thead");c=a.length===0?[]:da(a[0]);if(typeof e.aoColumns=="undefined"){e.aoColumns=[];a=0;for(b=c.length;a<b;a++)e.aoColumns.push(null)}a=0;for(b=e.aoColumns.length;a<b;a++){if(typeof e.saved_aoColumns!="undefined"&&e.saved_aoColumns.length==b)e.aoColumns[a]===null&&(e.aoColumns[a]={}),e.aoColumns[a].bVisible=e.saved_aoColumns[a].bVisible;A(g,c?c[a]:null)}if(typeof e.aoColumnDefs!="undefined")for(a=e.aoColumnDefs.length-1;a>=0;a--){var o=e.aoColumnDefs[a].aTargets;c=0;for(f=o.length;c<f;c++)if(typeof o[c]=="number"&&o[c]>=0){for(;g.aoColumns.length<=o[c];)A(g);B(g,o[c],e.aoColumnDefs[a])}else if(typeof o[c]=="number"&&o[c]<0)B(g,g.aoColumns.length+o[c],e.aoColumnDefs[a]);else if(typeof o[c]=="string"){b=0;for(l=g.aoColumns.length;b<l;b++)(o[c]=="_all"||g.aoColumns[b].nTh.className.indexOf(o[c])!=-1)&&B(g,b,e.aoColumnDefs[a])}}if(typeof e.aoColumns!="undefined"){a=0;for(b=e.aoColumns.length;a<b;a++)B(g,a,e.aoColumns[a])}a=0;for(b=g.aaSorting.length;a<b;a++){l=g.aoColumns[g.aaSorting[a][0]];typeof g.aaSorting[a][2]=="undefined"&&(g.aaSorting[a][2]=0);typeof e.aaSorting=="undefined"&&typeof g.saved_aaSorting=="undefined"&&(g.aaSorting[a][1]=l.asSorting[0]);c=0;for(f=l.asSorting.length;c<f;c++)if(g.aaSorting[a][1]==l.asSorting[c]){g.aaSorting[a][2]=c;break}}this.getElementsByTagName("thead").length===0&&this.appendChild(j.createElement("thead"));this.getElementsByTagName("tbody").length===0&&this.appendChild(j.createElement("tbody"));g.nTHead=this.getElementsByTagName("thead")[0];g.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0)g.nTFoot=this.getElementsByTagName("tfoot")[0];if(k)for(a=0;a<e.aaData.length;a++)v(g,e.aaData[a]);else u(g);g.aiDisplay=g.aiDisplayMaster.slice();g.bInitialised=!0;i===!1&&x(g)})}})(jQuery,window,document);var ZeroClipboard={version:"1.0.4-mod",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(d){typeof d=="string"&&(d=document.getElementById(d));if(!d.addClass)d.hide=function(){this.style.display="none"},d.show=function(){this.style.display=""},d.addClass=function(d){this.removeClass(d);this.className+=" "+d},d.removeClass=function(d){this.className=this.className.replace(RegExp("\\s*"+d+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},d.hasClass=function(d){return!!this.className.match(RegExp("\\s*"+d+"\\s*"))};return d},setMoviePath:function(d){this.moviePath=d},dispatch:function(d,i,j){(d=this.clients[d])&&d.receiveEvent(i,j)},register:function(d,i){this.clients[d]=i},getDOMObjectPosition:function(d){var i={left:0,top:0,width:d.width?d.width:d.offsetWidth,height:d.height?d.height:d.offsetHeight};if(d.style.width!="")i.width=d.style.width.replace("px","");if(d.style.height!="")i.height=d.style.height.replace("px","");for(;d;)i.left+=d.offsetLeft,i.top+=d.offsetTop,d=d.offsetParent;return i},Client:function(d){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);d&&this.glue(d)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(d,i){this.domElement=ZeroClipboard.$(d);var j=99;this.domElement.style.zIndex&&(j=parseInt(this.domElement.style.zIndex)+1);var n=ZeroClipboard.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var h=this.div.style;h.position="absolute";h.left="0px";h.top="0px";h.width=""+n.width+"px";h.height=""+n.height+"px";h.zIndex=j;if(typeof i!="undefined")this.div.title=i;this.domElement.appendChild(this.div);this.div.innerHTML=this.getHTML(n.width,n.height)},getHTML:function(d,i){var j="",n="id="+this.id+"&width="+d+"&height="+i;if(navigator.userAgent.match(/MSIE/)){var h=location.href.match(/^https/i)?"https://":"http://";j+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+h+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+d+'" height="'+i+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+n+'"/><param name="wmode" value="transparent"/></object>'}else j+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+d+'" height="'+i+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+n+'" wmode="transparent" />';return j},hide:function(){if(this.div)this.div.style.left="-2000px"},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var d=document.getElementsByTagName("body")[0];try{d.removeChild(this.div)}catch(i){}this.div=this.domElement=null}},reposition:function(d){if(d)(this.domElement=ZeroClipboard.$(d))||this.hide();if(this.domElement&&this.div){var d=ZeroClipboard.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=""+d.left+"px";i.top=""+d.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(d){this.clipText+=d;this.ready&&this.movie.appendText(d)},setText:function(d){this.clipText=d;this.ready&&this.movie.setText(d)},setCharSet:function(d){this.charSet=d;this.ready&&this.movie.setCharSet(d)},setBomInc:function(d){this.incBom=d;this.ready&&this.movie.setBomInc(d)},setFileName:function(d){this.fileName=d;this.ready&&this.movie.setFileName(d)},setAction:function(d){this.action=d;this.ready&&this.movie.setAction(d)},addEventListener:function(d,i){d=d.toString().toLowerCase().replace(/^on/,"");this.handlers[d]||(this.handlers[d]=[]);this.handlers[d].push(i)},setHandCursor:function(d){this.handCursorEnabled=d;this.ready&&this.movie.setHandCursor(d)},setCSSEffects:function(d){this.cssEffects=!!d},receiveEvent:function(d,i){d=d.toString().toLowerCase().replace(/^on/,"");switch(d){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var j=this;setTimeout(function(){j.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){j=this;setTimeout(function(){j.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=!1;if(this.domElement.hasClass("active"))this.domElement.removeClass("active"),this.recoverActive=!0;this.domElement.removeClass("hover")}break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":if(this.domElement&&this.cssEffects)this.domElement.removeClass("active"),this.recoverActive=!1}if(this.handlers[d])for(var n=0,h=this.handlers[d].length;n<h;n++){var e=this.handlers[d][n];if(typeof e=="function")e(this,i);else if(typeof e=="object"&&e.length==2)e[0][e[1]](this,i);else if(typeof e=="string")window[e](this,i)}}};var TableToolsInit={oFeatures:{bCsv:!0,bXls:!0,bCopy:!0,bPrint:!0},oBom:{bCsv:!0,bXls:!0},bIncFooter:!0,bIncHiddenColumns:!1,sPrintMessage:"",sPrintInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sTitle:"",sSwfPath:"/media/flash/ZeroClipboard.swf",iButtonHeight:30,iButtonWidth:30,sCsvBoundary:"'",_iNextId:1};(function(d){function i(i){function n(){var d=document.createElement("div");d.id="ToolTables_CSV_"+H;d.style.height=w.iButtonHeight+"px";d.style.width=w.iButtonWidth+"px";d.className="TableTools_button TableTools_csv";_nTools.appendChild(d);var e=new ZeroClipboard.Client;e.setHandCursor(!0);e.setAction("save");e.setCharSet("UTF8");e.setBomInc(w.oBom.bCsv);e.setFileName(A()+".csv");e.addEventListener("mouseOver",function(){d.className="TableTools_button TableTools_csv_hover"});e.addEventListener("mouseOut",function(){d.className="TableTools_button TableTools_csv"});e.addEventListener("mouseDown",function(){y(e,F(",",TableToolsInit.sCsvBoundary))});D(e,d,"ToolTables_CSV_"+H,"Save as CSV")}function h(){var d=document.createElement("div");d.id="ToolTables_XLS_"+H;d.style.height=w.iButtonHeight+"px";d.style.width=w.iButtonWidth+"px";d.className="TableTools_button TableTools_xls";_nTools.appendChild(d);var e=new ZeroClipboard.Client;e.setHandCursor(!0);e.setAction("save");e.setCharSet("UTF16LE");e.setBomInc(w.oBom.bXls);e.setFileName(A()+".xls");e.addEventListener("mouseOver",function(){d.className="TableTools_button TableTools_xls_hover"});e.addEventListener("mouseOut",function(){d.className="TableTools_button TableTools_xls"});e.addEventListener("mouseDown",function(){y(e,F("\t"))});D(e,d,"ToolTables_XLS_"+H,"Save for Excel")}function e(){var d=document.createElement("div");d.id="ToolTables_Copy_"+H;d.style.height=w.iButtonHeight+"px";d.style.width=w.iButtonWidth+"px";d.className="TableTools_button TableTools_clipboard";_nTools.appendChild(d);var e=new ZeroClipboard.Client;e.setHandCursor(!0);e.setAction("copy");e.addEventListener("mouseOver",function(){d.className="TableTools_button TableTools_clipboard_hover"});e.addEventListener("mouseOut",function(){d.className="TableTools_button TableTools_clipboard"});e.addEventListener("mouseDown",function(){y(e,F("\t"))});e.addEventListener("complete",function(){var d=N.split("\n");alert("Copied "+(d.length-1)+" rows to the clipboard")});D(e,d,"ToolTables_Copy_"+H,"Copy to clipboard")}function X(){var e=document.createElement("div");e.style.height=w.iButtonHeight+"px";e.style.width=w.iButtonWidth+"px";e.className="TableTools_button TableTools_print";e.title="Print table";_nTools.appendChild(e);d(e).hover(function(){e.className="TableTools_button TableTools_print_hover"},function(){e.className="TableTools_button TableTools_print"});d(e).click(function(){x(r.nTable);_iPrintSaveStart=r._iDisplayStart;_iPrintSaveLength=r._iDisplayLength;r._iDisplayStart=0;r._iDisplayLength=-1;r.oApi._fnCalculateEnd(r);r.oApi._fnDraw(r);var e=r.anFeatures,h;for(h in e)if(h!="i"&&h!="t")G.push({node:e[h],display:"block"}),e[h].style.display="none";var l=document.createElement("div");l.className="TableTools_PrintInfo";l.innerHTML=w.sPrintInfo;document.body.appendChild(l);if(w.sPrintMessage!=="")I=document.createElement("p"),I.className="TableTools_PrintMessage",I.innerHTML=w.sPrintMessage,document.body.insertBefore(I,document.body.childNodes[0]);R=d(window).scrollTop();window.scrollTo(0,0);d(document).bind("keydown",null,K);setTimeout(function(){d(l).fadeOut("normal",function(){document.body.removeChild(l)})},2E3)})}function K(e){if(e.keyCode==27){for(var e=0,h=G.length;e<h;e++)G[e].node.style.display=G[e].display;G.splice(0,G.length);window.scrollTo(0,R);I&&(document.body.removeChild(I),I=null);r._iDisplayStart=_iPrintSaveStart;r._iDisplayLength=_iPrintSaveLength;r.oApi._fnCalculateEnd(r);r.oApi._fnDraw(r);d(document).unbind("keydown",K)}}function x(e){for(var h=e.parentNode,i=h.childNodes,j=0,n=i.length;j<n;j++)if(i[j]!=e&&i[j].nodeType==1){var r=d(i[j]).css("display");if(r!="none")G.push({node:i[j],display:r}),i[j].style.display="none"}h.nodeName!="BODY"&&x(h)}function D(d,e,h,i){document.getElementById(h)?d.glue(e,i):setTimeout(function(){D(d,e,h,i)},100)}function A(){var d;d=w.sTitle!==""?w.sTitle:document.getElementsByTagName("title")[0].innerHTML;return"\u00a1".toString().length<4?d.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):d.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")}function B(d,e){return d.className.match(e)||d.nodeName=="BODY"?d:B(d.parentNode,e)}function v(d,e,h){return e===""?d:e+d.replace(h,"\\"+e)+e}function u(d){var d=q(d,2048),e=document.createElement("div"),h,i,j,n="";h=0;for(i=d.length;h<i;h++)j=d[h].lastIndexOf("&"),j!=-1&&d[h].length>=8&&j>d[h].length-8&&(d[h].substr(j),d[h]=d[h].substr(0,j)),e.innerHTML=d[h],n+=e.childNodes[0].nodeValue;return n}function q(d,e){for(var h=[],i=d.length,j=0;j<i;j+=e)j+e<i?h.push(d.substring(j,j+e)):h.push(d.substring(j,i));return h}function y(d,e){var h=q(e,8192);d.clearText();for(var i=0,j=h.length;i<j;i++)d.appendText(h[i])}function F(d,e){var h,i,j,n,q="",s="",x=navigator.userAgent.match(/Windows/)?"\r\n":"\n";typeof e=="undefined"&&(e="");var y=RegExp(e,"g");h=0;for(i=r.aoColumns.length;h<i;h++)if(w.bIncHiddenColumns===!0||r.aoColumns[h].bVisible)s=r.aoColumns[h].sTitle.replace(/\n/g," ").replace(/<.*?>/g,""),s.indexOf("&")!=-1&&(s=u(s)),q+=v(s,e,y)+d;q=q.slice(0,d.length*-1);q+=x;j=0;for(n=r.aiDisplay.length;j<n;j++){h=0;for(i=r.aoColumns.length;h<i;h++)if(w.bIncHiddenColumns===!0||r.aoColumns[h].bVisible)s=r.aoData[r.aiDisplay[j]]._aData[h],typeof s=="string"?(s=s.replace(/\n/g," "),s=s.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),s=s.replace(/<.*?>/g,"")):s+="",s=s.replace(/^\s+/,"").replace(/\s+$/,""),s.indexOf("&")!=-1&&(s=u(s)),q+=v(s,e,y)+d;q=q.slice(0,d.length*-1);q+=x}q.slice(0,-1);if(w.bIncFooter){h=0;for(i=r.aoColumns.length;h<i;h++)if(r.aoColumns[h].nTf!==null&&(w.bIncHiddenColumns===!0||r.aoColumns[h].bVisible))s=r.aoColumns[h].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),s.indexOf("&")!=-1&&(s=u(s)),q+=v(s,e,y)+d;q=q.slice(0,d.length*-1)}return N=q}var w,G=[],R=0,I=null,r,N,H;return function(i){_nTools=document.createElement("div");_nTools.className="TableTools";H=TableToolsInit._iNextId++;w=d.extend(!0,{},TableToolsInit);r=i.oDTSettings;B(r.nTable,"dataTables_wrapper");ZeroClipboard.moviePath=w.sSwfPath;w.oFeatures.bCopy&&e();w.oFeatures.bCsv&&n();w.oFeatures.bXls&&h();w.oFeatures.bPrint&&X();return _nTools}(i)}typeof d.fn.dataTable=="function"&&typeof d.fn.dataTableExt.sVersion!="undefined"?d.fn.dataTableExt.aoFeatures.push({fnInit:function(d){return new i({oDTSettings:d})},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.5 or greater - www.datatables.net/download");d.fn.dataTableExt.oSort['formatted-num-asc']=function(x,y){x=x.replace(/[^\d\-\.\/]/g,'');y=y.replace(/[^\d\-\.\/]/g,'');if(x.indexOf('/')>=0)x=eval(x);if(y.indexOf('/')>=0)y=eval(y);return x/1-y/1;};d.fn.dataTableExt.oSort['formatted-num-desc']=function(x,y){x=x.replace(/[^\d\-\.\/]/g,'');y=y.replace(/[^\d\-\.\/]/g,'');if(x.indexOf('/')>=0)x=eval(x);if(y.indexOf('/')>=0)y=eval(y);return y/1-x/1;};})(jQuery);(function(e){e.fn.timePicker=function(h){var i=e.extend({},e.fn.timePicker.defaults,h);return this.each(function(){e.timePicker(this,i);});};e.timePicker=function(j,h){var i=e(j)[0];return i.timePicker||(i.timePicker=new jQuery._timePicker(i,h));};e._timePicker=function(r,m){var u=false;var s=false;var k=d(m.startTime,m);var p=d(m.endTime,m);e(r).attr("autocomplete","OFF");var j=[];var l=new Date(k);while(l<=p){j[j.length]=g(l,m);l=new Date(l.setMinutes(l.getMinutes()+m.step));}var t=e('<div class="time-picker'+(m.show24Hours?"":" time-picker-12hours")+'"></div>');var n=e("<ul></ul>");for(var o=0;o<j.length;o++){n.append("<li>"+j[o]+"</li>");}t.append(n);t.appendTo("body").hide();t.mouseover(function(){u=true;}).mouseout(function(){u=false;});e("li",n).mouseover(function(){if(!s){e("li.selected",t).removeClass("selected");e(this).addClass("selected");}}).mousedown(function(){u=true;}).click(function(){f(r,this,t,m);u=false;});var q=function(){if(t.is(":visible")){return false;}e("li",t).removeClass("selected");var x=e(r).offset();t.css({top:x.top+r.offsetHeight,left:x.left});t.show();var z=r.value?b(r.value,m):k;var y=k.getHours()*60+k.getMinutes();var w=(z.getHours()*60+z.getMinutes())-y;var i=Math.round(w/m.step);var v=a(new Date(0,0,0,0,(i*m.step+y),0));v=(k<v&&v<=p)?v:k;var A=e("li:contains("+g(v,m)+")",t);if(A.length){A.addClass("selected");t[0].scrollTop=A[0].offsetTop;}return true;};e(r).focus(q).click(q);e(r).blur(function(){if(!u){t.hide();}});var h=(e.browser.opera||e.browser.mozilla)?"keypress":"keydown";e(r)[h](function(z){var i;s=true;var y=t[0].scrollTop;switch(z.keyCode){case 38:if(q()){return false;}i=e("li.selected",n);var w=i.prev().addClass("selected")[0];if(w){i.removeClass("selected");if(w.offsetTop<y){t[0].scrollTop=y-w.offsetHeight;}}else{i.removeClass("selected");w=e("li:last",n).addClass("selected")[0];t[0].scrollTop=w.offsetTop-w.offsetHeight;}return false;break;case 40:if(q()){return false;}i=e("li.selected",n);var v=i.next().addClass("selected")[0];if(v){i.removeClass("selected");if(v.offsetTop+v.offsetHeight>y+t[0].offsetHeight){t[0].scrollTop=y+v.offsetHeight;}}else{i.removeClass("selected");v=e("li:first",n).addClass("selected")[0];t[0].scrollTop=0;}return false;break;case 13:if(t.is(":visible")){var x=e("li.selected",n)[0];f(r,x,t,m);}return false;break;case 27:t.hide();return false;break;}return true;});e(r).keyup(function(i){s=false;});this.getTime=function(){return b(r.value,m);};this.setTime=function(i){r.value=g(a(i),m);e(r).change();};};e.fn.timePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,0),separator:":",show24Hours:true};function f(k,j,h,i){k.value=e(j).text();e(k).change();if(!e.browser.msie){k.focus();}h.hide();}function g(m,l){var k=m.getHours();var i=l.show24Hours?k:(((k+11)%12)+1);var j=m.getMinutes();return c(i)+l.separator+c(j)+(l.show24Hours?"":((k<12)?" AM":" PM"));}function c(h){return(h<10?"0":"")+h;}function d(h,i){return(typeof h=="object")?a(h):b(h,i);}function b(i,k){if(i){var m=i.split(k.separator);var h=parseFloat(m[0]);var j=parseFloat(m[1]);if(!k.show24Hours){if(h===12&&i.indexOf("AM")!==-1){h=0;}else{if(h!==12&&i.indexOf("PM")!==-1){h+=12;}}}var l=new Date(0,0,0,h,j,0);return a(l);}return null;}function a(h){h.setFullYear(2001);h.setMonth(0);h.setDate(0);return h;}})(jQuery);(function($){$.fn.jCarouselLite=function(o){o=$.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},o||{});return this.each(function(){var b=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var c=$(this),ul=$("ul",c),tLi=$("li",ul),tl=tLi.size(),v=o.visible;if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());o.start+=v}var f=$("li",ul),itemLength=f.size(),curr=o.start;c.css("visibility","visible");f.css({overflow:"hidden",float:o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});c.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var g=o.vertical?height(f):width(f);var h=g*itemLength;var j=g*v;f.css({width:f.width(),height:f.height()});ul.css(sizeCss,h+"px").css(animCss,-(curr*g));c.css(sizeCss,j+"px");if(o.btnPrev)$(o.btnPrev).click(function(){return go(curr-o.scroll)});if(o.btnNext)$(o.btnNext).click(function(){return go(curr+o.scroll)});if(o.btnGo)$.each(o.btnGo,function(i,a){$(a).click(function(){return go(o.circular?o.visible+i:i)})});if(o.mouseWheel&&c.mousewheel)c.mousewheel(function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll)});if(o.auto)setInterval(function(){go(curr+o.scroll)},o.auto+o.speed);function vis(){return f.slice(curr).slice(0,v)};function go(a){if(!b){if(o.beforeStart)o.beforeStart.call(this,vis());if(o.circular){if(a<=o.start-v-1){ul.css(animCss,-((itemLength-(v*2))*g)+"px");curr=a==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll}else if(a>=itemLength-v+1){ul.css(animCss,-((v)*g)+"px");curr=a==itemLength-v+1?v+1:v+o.scroll}else curr=a}else{if(a<0||a>itemLength-v)return;else curr=a}b=true;ul.animate(animCss=="left"?{left:-(curr*g)}:{top:-(curr*g)},o.speed,o.easing,function(){if(o.afterEnd)o.afterEnd.call(this,vis());b=false});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled")}}return false}})};function css(a,b){return parseInt($.css(a[0],b))||0};function width(a){return a[0].offsetWidth+css(a,'marginLeft')+css(a,'marginRight')};function height(a){return a[0].offsetHeight+css(a,'marginTop')+css(a,'marginBottom')}})(jQuery);(function(b){function m(d,a){var e=d==window,c=a&&a.message!==void 0?a.message:void 0,a=b.extend({},b.blockUI.defaults,a||{});a.overlayCSS=b.extend({},b.blockUI.defaults.overlayCSS,a.overlayCSS||{});var g=b.extend({},b.blockUI.defaults.css,a.css||{}),i=b.extend({},b.blockUI.defaults.themedCSS,a.themedCSS||{}),c=c===void 0?a.message:c;e&&j&&p(window,{fadeOut:0});if(c&&typeof c!="string"&&(c.parentNode||c.jquery)){var h=c.jquery?c[0]:c,f={};b(d).data("blockUI.history",f);f.el=h;f.parent=h.parentNode;f.display=h.style.display;f.position=h.style.position;f.parent&&f.parent.removeChild(h)}var f=a.baseZ,k=b.browser.msie||a.forceIframe?b('<iframe class="blockUI" style="z-index:'+f+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+a.iframeSrc+'"></iframe>'):b('<div class="blockUI" style="display:none"></div>'),h=b('<div class="blockUI blockOverlay" style="z-index:'+f+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),f=a.theme&&e?b('<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+f+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(a.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>'):e?b('<div class="blockUI blockMsg blockPage" style="z-index:'+f+';display:none;position:fixed"></div>'):b('<div class="blockUI blockMsg blockElement" style="z-index:'+f+';display:none;position:absolute"></div>');c&&(a.theme?(f.css(i),f.addClass("ui-widget-content")):f.css(g));(!a.applyPlatformOpacityRules||!b.browser.mozilla||!/Linux/.test(navigator.platform))&&h.css(a.overlayCSS);h.css("position",e?"fixed":"absolute");(b.browser.msie||a.forceIframe)&&k.css("opacity",0);var g=[k,h,f],o=e?b("body"):b(d);b.each(g,function(){this.appendTo(o)});a.theme&&a.draggable&&b.fn.draggable&&f.draggable({handle:".ui-dialog-titlebar",cancel:"li"});g=v&&(!b.boxModel||b("object,embed",e?null:d).length>0);if(r||g){e&&a.allowBodyStretch&&b.boxModel&&b("html,body").css("height","100%");if((r||!b.boxModel)&&!e)var g=parseInt(b.css(d,"borderTopWidth"))||0,i=parseInt(b.css(d,"borderLeftWidth"))||0,m=g?"(0 - "+g+")":0,n=i?"(0 - "+i+")":0;b.each([k,h,f],function(b,d){var c=d[0].style;c.position="absolute";if(b<2)e?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+a.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),e?c.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),n&&c.setExpression("left",n),m&&c.setExpression("top",m);else if(a.centerY)e&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!a.centerY&&e){var f="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(a.css&&a.css.top?parseInt(a.css.top):0)+') + "px"';c.setExpression("top",f)}})}c&&(a.theme?f.find(".ui-widget-content").append(c):f.append(c),(c.jquery||c.nodeType)&&b(c).show());(b.browser.msie||a.forceIframe)&&a.showOverlay&&k.show();if(a.fadeIn)g=a.onBlock?a.onBlock:q,k=a.showOverlay&&!c?g:q,g=c?g:q,a.showOverlay&&h._fadeIn(a.fadeIn,k),c&&f._fadeIn(a.fadeIn,g);else if(a.showOverlay&&h.show(),c&&f.show(),a.onBlock)a.onBlock();s(1,d,a);e?(j=f[0],l=b(":input:enabled:visible",j),a.focusInput&&setTimeout(t,20)):w(f[0],a.centerX,a.centerY);a.timeout&&(c=setTimeout(function(){e?b.unblockUI(a):b(d).unblock(a)},a.timeout),b(d).data("blockUI.timeout",c))}function p(d,a){var e=d==window,c=b(d),g=c.data("blockUI.history"),i=c.data("blockUI.timeout");i&&(clearTimeout(i),c.removeData("blockUI.timeout"));a=b.extend({},b.blockUI.defaults,a||{});s(0,d,a);var h;h=e?b("body").children().filter(".blockUI").add("body > .blockUI"):b(".blockUI",d);e&&(j=l=null);a.fadeOut?(h.fadeOut(a.fadeOut),setTimeout(function(){n(h,g,a,d)},a.fadeOut)):n(h,g,a,d)}function n(d,a,e,c){d.each(function(){this.parentNode&&this.parentNode.removeChild(this)});if(a&&a.el)a.el.style.display=a.display,a.el.style.position=a.position,a.parent&&a.parent.appendChild(a.el),b(c).removeData("blockUI.history");if(typeof e.onUnblock=="function")e.onUnblock(c,e)}function s(d,a,e){var c=a==window,a=b(a);if(d||!(c&&!j||!c&&!a.data("blockUI.isBlocked")))c||a.data("blockUI.isBlocked",d),e.bindEvents&&(!d||e.showOverlay)&&(d?b(document).bind("mousedown mouseup keydown keypress",e,u):b(document).unbind("mousedown mouseup keydown keypress",u))}function u(d){if(d.keyCode&&d.keyCode==9&&j&&d.data.constrainTabKey){var a=l,e=d.shiftKey&&d.target==a[0];if(!d.shiftKey&&d.target==a[a.length-1]||e)return setTimeout(function(){t(e)},10),!1}if(b(d.target).parents("div.blockMsg").length>0)return!0;return b(d.target).parents().children().filter("div.blockUI").length==0}function t(b){l&&(b=l[b===!0?l.length-1:0])&&b.focus()}function w(d,a,e){var c=d.parentNode,g=d.style,i=(c.offsetWidth-d.offsetWidth)/2-(parseInt(b.css(c,"borderLeftWidth"))||0),d=(c.offsetHeight-d.offsetHeight)/2-(parseInt(b.css(c,"borderTopWidth"))||0);if(a)g.left=i>0?i+"px":"0";if(e)g.top=d>0?d+"px":"0"}if(/1\.(0|1|2)\.(0|1|2)/.test(b.fn.jquery)||/^1.1/.test(b.fn.jquery))alert("blockUI requires jQuery v1.2.3 or later! You are using v"+b.fn.jquery);else{b.fn._fadeIn=b.fn.fadeIn;var q=function(){},o=document.documentMode||0,v=b.browser.msie&&(b.browser.version<8&&!o||o<8),r=b.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!o;b.blockUI=function(b){m(window,b)};b.unblockUI=function(b){p(window,b)};b.growlUI=function(d,a,e,c){var g=b('<div class="growlUI"></div>');d&&g.append("<h1>"+d+"</h1>");a&&g.append("<h2>"+a+"</h2>");e==void 0&&(e=3E3);b.blockUI({message:g,fadeIn:700,fadeOut:1E3,centerY:!1,timeout:e,showOverlay:!1,onUnblock:c,css:b.blockUI.defaults.growlCSS})};b.fn.block=function(d){return this.unblock({fadeOut:0}).each(function(){if(b.css(this,"position")=="static")this.style.position="relative";if(b.browser.msie)this.style.zoom=1;m(this,d)})};b.fn.unblock=function(b){return this.each(function(){p(this,b)})};b.blockUI.version=2.31;b.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var j=null,l=[]}})(jQuery);head.js('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js','/js2/?f=jquery.form',function(){$('#tDate').datepicker({minDate:0,dateFormat:'yy-mm-dd'})
$('#ui-datepicker-div').hide();$('#tTime').timePicker({step:60,show24Hours:false});$('.step, .next, .previous').click(function(){selectTab($(this).attr('id').replace(/[^0-9]/g,''));});$('a.choose').click(function(){var div=$('#d'+$(this).attr('id').replace(/^a/,'')),type=$(this).attr('title').replace(' Email','').toLowerCase(),h2=$('#dStep2 h2:first');$.post('/ajax/email-marketing/emails/get-templates/',{_nonce:$('#_ajax_get_templates').val(),'type':type},function(data){if(data['success']){var slider=div.find('.slider:first'),ul=$('#ulSlider_'+type),templateImage=$('.template-image',div),lis='';templateImage.empty();$('a',slider).remove();ul.empty();var showCarousel=(data['templates'].length>3)?true:false;for(var i in data['templates']){var t=data['templates'][i],CSSClass=(i>0)?' class="hidden"':' class="selected"';var thumbnail=(0==t['thumbnail'].length)?'/images/emails/thumbnails/default.jpg':t['thumbnail'];var image=(0==t['image'].length)?'/images/emails/default.jpg':t['image'];lis+='<li><a href="javascript:;" title="'+t['name']+'"><img src="'+thumbnail+'" class="slide" id="aSlide'+t['email_template_id']+'" width="100" height="113" alt="'+t['name']+'" /></a></li>';templateImage.append('<img src="'+image+'" id="iTemplateImage'+t['email_template_id']+'"'+CSSClass+' width="400" alt="'+t['name']+'" />');}
if(showCarousel){ul.wrap('<div id="dSlider_'+type+'">');slider.prepend('<a href="javascript:;" class="arrow-up disabled previous_slide" title="Previous">&nbsp;</a><br />');}
ul.append(lis);if(showCarousel)
slider.append('<a href="javascript:;" class="arrow-down enabled next_slide" title="Next">&nbsp;</a>');templateImage.append('\<a href="javascript:;" class="button choose-template" title="Choose Template">Choose Template</a>');div.append('<br clear="all" />');if(showCarousel)
setTimeout(function(){$('#dSlider_'+type).jCarouselLite({btnNext:'.next_slide',btnPrev:'.previous_slide',vertical:true,scroll:2});},200);}else{alert(data['error']);}},'json');$('#dChooseType').fadeOut();h2.fadeOut();setTimeout(function(){div.fadeIn();h2.text('Choose Template').fadeIn();},300);$('#hEmailType').val(type);});$('#dStep2 .slide').live('mouseover',function(){$(this).parents('.email-type:first').find('.template-image .selected:first').hide().removeClass('selected');$('#iTemplateImage'+$(this).attr('id').replace('aSlide','')).addClass('selected').show();});$('.choose-template').live('click',function(){$('#hEmailTemplateID').val($('#dStep2 .template-image .selected:first').attr('id').replace('iTemplateImage',''));$('.custom-template').hide();$('#dCustom_'+$('#hEmailType').val()).show();selectTab(3);});$('.product-price, .product-box-price').live('keyup',function(){var hiddenProduct=$(this).parents('.product:first').find('input:last');hiddenProduct.val(hiddenProduct.val().replace(/\|[0-9]*/,'|'+parseFloat($(this).val())));});var cache={'offer-box':{},'sku':{},'product':{},'brand':{}};$('#tAutoSuggestBox1, #tAutoSuggestBox2').autocomplete({minLength:1,source:function(request,response){if(request['term']in cache['offer-box']){response($.map(cache['offer-box'][request['term']],function(item){return{'label':item['name'],'value':item['value']}}));return;}
$.post('/ajax/products/autocomplete/',{_nonce:$('#_ajax_autocomplete').val(),term:request['term'],type:'sku-products',owned:1},function(autocompleteResponse){cache['offer-box'][request['term']]=autocompleteResponse['suggestions'];response($.map(autocompleteResponse['suggestions'],function(item){return{'label':item['name'],'value':item['value']}}))},'json');},select:function(event,ui){$.post('/ajax/email-marketing/emails/offer-box/',{_nonce:$('#_ajax_offer_box').val(),pid:ui['item']['value'],bid:$(event.target).attr('id').replace('tAutoSuggest','')},ajaxResponse,'json');return false;}});$('#sAutoComplete').change(function(){var tAutoComplete=$('#tAutoComplete');tAutoComplete.attr('tmpval',tAutoComplete.attr('tmpval').replace(/\s([\w\s]+).../,' '+$(this).find('option:selected').text()+'...')).val('').blur();});$('#tAutoComplete').autocomplete({minLength:1,source:function(request,response){var cacheType=$('#sAutoComplete').val();if(request['term']in cache[cacheType]){response($.map(cache[cacheType][request['term']],function(item){return{'label':item['name'],'value':item['name']}}));return;}
$.post('/ajax/products/autocomplete/',{'_nonce':$('#_ajax_autocomplete').val(),'type':cacheType,'term':request['term'],owned:1},function(autocompleteResponse){cache[cacheType][request['term']]=autocompleteResponse['suggestions'];response($.map(autocompleteResponse['suggestions'],function(item){return{'label':item['name'],'value':item['name']}}));},'json');}});$('#aSearch').click(function(){$('#tAddProducts').dataTable().fnDraw();});$('.remove-product').live('click',function(){$(this).parents('.product').remove();changeCount(-1);});$('.remove-box-product').live('click',function(){$(this).parents('.product-container').empty().prev().val('').blur();});$("#dSelectedProducts").sortable({update:function(){resortProducts();},scroll:true,placeholder:'product-placeholder'});$('.save').click(saveForm);$('#fSendEmail').ajaxForm({beforeSubmit:function(){if(!saveForm())
return false;},success:saveFormSuccess,dataType:'json'});$('#aSendTest').click(function(){if($(this).text().search(/\+/)>0){$('#dSendTest').show();$(this).text('Send Test [ - ]');}else{$('#dSendTest').hide();$(this).text('Send Test [ + ]');}});$('#bSendTest').click(function(){var tTestEmail=$('#tTestEmail'),email=tTestEmail.val();if(0==email.length||email==tTestEmail.attr('tmpval')||null==email.match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)){alert($(this).attr('error'));$('#tTestEmail').focus();return false;}
saveForm(testMessage);});$('#aSendEmail').click(function(){if(0==$('#hEmailMessageID').val()){alert($(this).attr('error'));return false;}
saveForm(sendScheduleEmail);});$('.select-box-type').change(function(){var boxID=$(this).attr('id').replace(/^s/,'');switch($(this).val()){case'':$('#dText'+boxID,'#dProduct'+boxID).hide();break;case'text':$('#dProduct'+boxID).hide();$('#dText'+boxID).slideDown();break;case'product':$('#dText'+boxID).hide();$('#dProduct'+boxID).slideDown();break;}});$('#aCheckAll').click(function(){$('input.mailing-list').each(function(){if(!$(this).attr('disabled'))
$(this).attr('checked',true);});});$('#aUncheckAll').click(function(){$('input.mailing-list').attr('checked',false);});});function resortProducts(){var hiddenProducts='';$('input.hidden-product').remove();$('.product').each(function(){var productID=$(this).attr('id').replace('dProduct_','');var price=$('#dProduct_'+productID).find('input:first').val();hiddenProducts+='<input type="hidden" name="products[]" class="hidden-product" id="hProduct'+productID+'" value="'+productID+'|'+price+'" />';});$('#fSendEmail').append(hiddenProducts);}
function testMessage(){$.blockUI({timeout:0,message:'<h1><img src="/images/icons/ajax-loading.gif" alt="Sending Test Email..." width="28" height="28" /><br />Sending test email.<br />This may take 1-2 minutes...</h1>'});$.post('/ajax/email-marketing/emails/test/',{_nonce:$('#_ajax_test_message').val(),'email':$('#tTestEmail').val(),emid:$('#hEmailMessageID').val()},function(success){$.unblockUI();if(success){$('#pSuccessMessage').show().delay(5000).hide();}else{alert('An error occurred while trying to send the test email. Please refresh the page and try again.');}},'json');}
function sendScheduleEmail(){$.blockUI({timeout:0,message:'<h1><img src="/images/icons/ajax-loading.gif" alt="Sending Email..." width="28" height="28" /><br />Sending/scheduling your email.<br />This may take 1-2 minutes...</h1>'});$.post('/ajax/email-marketing/emails/schedule/',{_nonce:$('#_ajax_schedule_email').val(),emid:$('#hEmailMessageID').val()},function(response){$.unblockUI();if(!response['success']){alert(response['error']);return;}
document.location='/email-marketing/emails/';},'json');}
function saveForm(saveFormCallback){if(!$('#dStep1 .cb:checked:first').length){alert('You must select a Mailing List first');return false;}
$.blockUI({timeout:0,message:'<h1><img src="/images/icons/ajax-loading.gif" alt="Saving..." width="28" height="28" /><br />Saving...</h1>'});resortProducts();if('function'==typeof(saveFormCallback))
globalCallback=saveFormCallback;$('#fSendEmail').ajaxSubmit({success:saveFormSuccess,dataType:'json'});return true;}
function saveFormSuccess(response){$.unblockUI();if(response['success']){$('#hEmailMessageID').val(response['email_message_id']);if('function'==typeof(globalCallback))
globalCallback();globalCallback=null;}else{alert(response['error']);}}
function selectTab(tabID){var oldTab=$('#tab-top .tab.selected').removeClass('selected'),oldID=oldTab.attr('id').replace('h2Step','');if(2==tabID){$('#dChooseType').show();$('#dStep2 h2:first').text('Choose Email Type');$('.email-type').hide();}else if(3==tabID){$('#tAddProducts:not(.dt)').addClass('dt').dataTable({aaSorting:[[0,'asc']],bAutoWidth:false,bProcessing:1,bServerSide:1,iDisplayLength:20,sAjaxSource:'/ajax/email-marketing/emails/list-products/',sDom:'<"top"lr>t<"bottom"pi>',oLanguage:{sLengthMenu:'Rows: <select><option value="20">20</option><option value="50">50</option><option value="100">100</option></select>',sInfo:"_START_ - _END_ of _TOTAL_"},fnDrawCallback:function(){sparrow($(this).find('tr:last').addClass('last').end());},fnServerData:function(sSource,aoData,fnCallback){aoData.push({name:'s',value:$('#tAutoComplete').val()});aoData.push({name:'sType',value:$('#sAutoComplete').val()});$.ajax({url:sSource,dataType:'json',data:aoData,success:fnCallback});},});}
$('#dStep'+oldID).fadeOut('fast');$('#h2Step'+tabID).addClass('selected');setTimeout(function(){$('#dStep'+tabID).fadeIn();},250);}
function changeCount(count){var h2ProductCount=$('#h2ProductCount'),productCountText=h2ProductCount.text(),productCount=productCountText.match(/[0-9]/);$('#h2ProductCount').text(productCountText.replace(/[0-9]/,(parseInt(productCount[0])+parseInt(count))));}
$.fn.changeCount=changeCount;var sparrow=function(a){$("input[tmpval],textarea[tmpval]",a).each(function(){$(this).focus(function(){$(this).val()==$(this).attr("tmpval")&&$(this).val("").removeClass("tmpval")}).blur(function(){var b=$(this).val(),a=$(this).attr("tmpval");(0==b.length||b==a)&&$(this).val(a).addClass("tmpval")});$(this).val().length||$(this).val($(this).attr("tmpval")).addClass("tmpval")});var e=$("table[ajax],table.dt",a);e.length&&head.js("/js2/?f=jquery.datatables",function(){e.addClass("dt").each(function(){var b=$(this).attr("perPage").split(","),a="",d=$(this).find("th").append('<img src="/images/trans.gif" width="10" height="8" />'),g=[],h=[],i="",e="",f=$(this).attr("ajax"),c;for(c in b)a+='<option value="'+b[c]+'">'+b[c]+"</option>";if(d.length)for(c=0;c<d.length;c++){if(i=$(d[c]).attr("sort")){var j=-1==i.search("desc")?"asc":"desc";g[i.replace(" desc","")-1]=[c,j]}(e=$(d[c]).attr("column"))?h.push({sType:e}):h.push(null)}else g=[[0,"asc"]];b={bAutoWidth:!1,iDisplayLength:parseInt(b[0]),oLanguage:{sLengthMenu:"Rows: <select>"+a+"</select>",sInfo:"_START_ - _END_ of _TOTAL_"},aaSorting:g,aoColumns:h,fnDrawCallback:function(){sparrow($(this).find("tr:last").addClass("last").end())},sDom:'<"top"Tlfr>t<"bottom"pi>'};if(f)b.bProcessing=1,b.bServerSide=1,b.sAjaxSource=f;$(this).dataTable(b)})});var f=$("a[rel=dialog]",a);f.length&&head.js("/js2/?f=jquery.boxy",function(){f.click(function(b){b.preventDefault();var b=$(this).attr("href").split("#"),a=$("#"+b[1]),d={title:$(this).attr("title"),behaviours:sparrow};a.length&&"0"!=$(this).attr("cache")?new Boxy(a,d):($("body").append('<div id="'+b[1]+'" class="dialog" />'),a=$("#"+b[1]),a.load(b[0],function(){new Boxy(a,d)}))})});$("a[ajax]",a).click(function(a){a.preventDefault();a=$(this).attr("confirm");(!a||confirm(a))&&$.get($(this).attr("href"),ajaxResponse,"json")}).removeAttr("ajax");"function"==typeof mammoth&&mammoth(a)};$.fn.sparrow=sparrow;head.ready(function(){sparrow($("body"))});function ajaxResponse(a){a.success?a.refresh?window.location=window.location:"object"==typeof a.jquery&&head.js("/js2/?f=jquery.php",function(){php(a.jquery)}):a.error&&alert(a.error)};jQuery(function(){$("#aTicket").click(function(){var a=$(this);a.hasClass("loaded")?new Boxy($("#dTicketPopup"),{title:a.attr("title")}):head.js("/js2/?f=jquery.boxy","/js2/?f=jquery.form","/js2/?f=swfobject","/js2/?f=jquery.uploadify",function(){a.addClass("loaded");new Boxy($("#dTicketPopup"),{title:a.attr("title")});$("#fCreateTicket").addClass("ajax").ajaxForm({dataType:"json",beforeSubmit:function(){var a=$("#tTicketSummary"),d=a.val(),b=$("#taTicket"),c=b.val();if(!d.length||d==a.attr("tmpval"))return alert(a.attr("error")),!1;return!c.length||c==b.attr("tmpval")?(alert(b.attr("error")),!1):!0},success:ajaxResponse});$("#fTicketUpload").uploadify({auto:!0,multi:!0,displayData:"speed",buttonImg:"/images/buttons/add-attachment.png",cancelImg:"/images/icons/x.png",fileExt:"*.pdf;*.mov;*.wmv;*.flv;*.swf;*.f4v;*.mp4;*.avi;*.mp3;*.aif;*.wma;*.wav;*.csv;*.doc;*.docx;*.rtf;*.xls;*.xlsx;*.wpd;*.txt;*.wps;*.pps;*.ppt;*.wks;*.bmp;*.gif;*.jpg;*.jpeg;*.png;*.psd;*.eps;*.tif;*.zip;*.7z;*.rar;*.zipx;*.aiff;*.odt;",fileDesc:"Valid File Formats",onComplete:function(a,d,b,c){ajaxResponse($.parseJSON(c))},onSelect:function(){$("#fTicketUpload").uploadifySettings("scriptData",{_nonce:$("#_ajax_ticket_upload").val(),uid:$("#hUserID").val(),wid:$("#hTicketWebsiteID").val(),tid:$("#hTicketID").val()});return!0},sizeLimit:6291456,script:"/ajax/support/ticket-upload/",uploader:"/media/flash/uploadify.swf",width:124,height:34})})})});