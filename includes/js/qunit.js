(function(j){function p(a){if(!a)return"";a+="";return a.replace(/[\&"<>\\]/g,function(a){switch(a){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return a}})}function n(a){c.queue.push(a);c.autorun&&!c.blocking&&r()}function r(){for(var a=(new Date).getTime();c.queue.length&&!c.blocking;)if(c.updateRate<=0||(new Date).getTime()-a<c.updateRate)c.queue.shift()();else{j.setTimeout(r,13);break}if(!c.blocking&&!c.queue.length){c.autorun= !0;c.currentModule&&f.moduleDone({name:c.currentModule,failed:c.moduleStats.bad,passed:c.moduleStats.all-c.moduleStats.bad,total:c.moduleStats.all});var a=k("qunit-banner"),b=k("qunit-tests"),d=+new Date-c.started,g=c.stats.all-c.stats.bad,i=["Tests completed in ",d,' milliseconds.<br/><span class="passed">',g,'</span> tests of <span class="total">',c.stats.all,'</span> passed, <span class="failed">',c.stats.bad,"</span> failed."].join("");if(a)a.className=c.stats.bad?"qunit-fail":"qunit-pass";if(b)k("qunit-testresult").innerHTML= i;if(typeof document!=="undefined"&&document.title)document.title=(c.stats.bad?"\u2716":"\u2714")+" "+document.title;f.done({failed:c.stats.bad,passed:g,total:c.stats.all,runtime:d})}}function s(){c.pollution=[];if(c.noglobals)for(var a in j)c.pollution.push(a)}function w(a,b){for(var d=a.slice(),g=0;g<d.length;g++)for(var c=0;c<b.length;c++)if(d[g]===b[c]){d.splice(g,1);g--;break}return d}function x(a,b,d){typeof console!=="undefined"&&console.error&&console.warn?(console.error(a),console.error(b), console.warn(d.toString())):j.opera&&opera.postError&&opera.postError(a,b,d.toString)}function l(a,b){for(var d in b)b[d]===void 0?delete a[d]:a[d]=b[d];return a}function q(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent?a.attachEvent("on"+b,d):d()}function k(a){return!!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(a)}function t(a){for(var b="",d,g=0;a[g];g++)d=a[g],d.nodeType===3||d.nodeType===4?b+=d.nodeValue:d.nodeType!==8&&(b+=t(d.childNodes)); return b}var A=typeof j.setTimeout!=="undefined",u;try{u=!!sessionStorage.getItem}catch(C){u=!1}var o={setTimeout:A,sessionStorage:u},B=0,y=function(a,b,d,g,c,h){this.name=a;this.testName=b;this.expected=d;this.testEnvironmentArg=g;this.async=c;this.callback=h;this.assertions=[]};y.prototype={init:function(){var a=k("qunit-tests");if(a){var b=document.createElement("strong");b.innerHTML="Running "+this.name;var d=document.createElement("li");d.appendChild(b);d.className="running";d.id=this.id="test-output"+ B++;a.appendChild(d)}},setup:function(){if(this.module!=c.previousModule)c.previousModule&&f.moduleDone({name:c.previousModule,failed:c.moduleStats.bad,passed:c.moduleStats.all-c.moduleStats.bad,total:c.moduleStats.all}),c.previousModule=this.module,c.moduleStats={all:0,bad:0},f.moduleStart({name:this.module});c.current=this;this.testEnvironment=l({setup:function(){},teardown:function(){}},this.moduleTestEnvironment);this.testEnvironmentArg&&l(this.testEnvironment,this.testEnvironmentArg);f.testStart({name:this.testName}); f.current_testEnvironment=this.testEnvironment;try{c.pollution||s(),this.testEnvironment.setup.call(this.testEnvironment)}catch(a){f.ok(!1,"Setup failed on "+this.testName+": "+a.message)}},run:function(){this.async&&f.stop();if(c.notrycatch)this.callback.call(this.testEnvironment);else try{this.callback.call(this.testEnvironment)}catch(a){x("Test "+this.testName+" died, exception and test follows",a,this.callback),f.ok(!1,"Died on test #"+(this.assertions.length+1)+": "+a.message+" - "+f.jsDump.parse(a)), s(),c.blocking&&start()}},teardown:function(){try{this.testEnvironment.teardown.call(this.testEnvironment);var a=c.pollution;s();var b=w(c.pollution,a);b.length>0&&ok(!1,"Introduced global variable(s): "+b.join(", "));var d=w(a,c.pollution);d.length>0&&ok(!1,"Deleted global variable(s): "+d.join(", "))}catch(g){f.ok(!1,"Teardown failed on "+this.testName+": "+g.message)}},finish:function(){this.expected&&this.expected!=this.assertions.length&&f.ok(!1,"Expected "+this.expected+" assertions, but "+ this.assertions.length+" were run");var a=0,b=0,d=k("qunit-tests");c.stats.all+=this.assertions.length;c.moduleStats.all+=this.assertions.length;if(d){for(var d=document.createElement("ol"),g=0;g<this.assertions.length;g++){var i=this.assertions[g],h=document.createElement("li");h.className=i.result?"pass":"fail";h.innerHTML=i.message||(i.result?"okay":"failed");d.appendChild(h);i.result?a++:(b++,c.stats.bad++,c.moduleStats.bad++)}f.config.reorder&&o.sessionStorage&&(b?sessionStorage.setItem("qunit-"+ this.module+"-"+this.testName,b):sessionStorage.removeItem("qunit-"+this.module+"-"+this.testName));if(b==0)d.style.display="none";var e=document.createElement("strong");e.innerHTML=this.name+" <b class='counts'>(<b class='failed'>"+b+"</b>, <b class='passed'>"+a+"</b>, "+this.assertions.length+")</b>";a=document.createElement("a");a.innerHTML="Rerun";a.href=f.url({filter:t([e]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")});q(e,"click",function(){var a=e.nextSibling.nextSibling;a.style.display= a.style.display==="none"?"block":"none"});q(e,"dblclick",function(e){e=e&&e.target?e.target:j.event.srcElement;if(e.nodeName.toLowerCase()=="span"||e.nodeName.toLowerCase()=="b")e=e.parentNode;if(j.location&&e.nodeName.toLowerCase()==="strong")j.location=f.url({filter:t([e]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")})});h=k(this.id);h.className=b?"fail":"pass";h.removeChild(h.firstChild);h.appendChild(e);h.appendChild(a);h.appendChild(d)}else for(g=0;g<this.assertions.length;g++)this.assertions[g].result|| (b++,c.stats.bad++,c.moduleStats.bad++);try{f.reset()}catch(m){x("reset() failed, following Test "+this.testName+", exception and reset fn follows",m,f.reset)}f.testDone({name:this.testName,failed:b,passed:this.assertions.length-b,total:this.assertions.length})},queue:function(){function a(){n(function(){b.setup()});n(function(){b.run()});n(function(){b.teardown()});n(function(){b.finish()})}var b=this;n(function(){b.init()});f.config.reorder&&o.sessionStorage&&+sessionStorage.getItem("qunit-"+this.module+ "-"+this.testName)?a():n(a)}};var f={module:function(a,b){c.currentModule=a;c.currentModuleTestEnviroment=b},asyncTest:function(a,b,d){arguments.length===2&&(d=b,b=0);f.test(a,b,d,!0)},test:function(a,b,d,g){var f='<span class="test-name">'+a+"</span>",h;arguments.length===2&&(d=b,b=null);b&&typeof b==="object"&&(h=b,b=null);c.currentModule&&(f='<span class="module-name">'+c.currentModule+"</span>: "+f);var e;e=c.currentModule+": "+a;var m=c.filter,z=!1;if(m){var v=m.charAt(0)==="!";v&&(m=m.slice(1)); e.indexOf(m)!==-1?e=!v:(v&&(z=!0),e=z)}else e=!0;if(e)f=new y(f,a,b,h,g,d),f.module=c.currentModule,f.moduleTestEnvironment=c.currentModuleTestEnviroment,f.queue()},expect:function(a){c.current.expected=a},ok:function(a,b){var a=!!a,d={result:a,message:b},b=p(b);f.log(d);c.current.assertions.push({result:a,message:b})},equal:function(a,b,d){f.push(b==a,a,b,d)},notEqual:function(a,b,d){f.push(b!=a,a,b,d)},deepEqual:function(a,b,d){f.push(f.equiv(a,b),a,b,d)},notDeepEqual:function(a,b,d){f.push(!f.equiv(a, b),a,b,d)},strictEqual:function(a,b,d){f.push(b===a,a,b,d)},notStrictEqual:function(a,b,d){f.push(b!==a,a,b,d)},raises:function(a,b,d){var g,c=!1;typeof b==="string"&&(d=b,b=null);try{a()}catch(h){g=h}g&&(b?f.objectType(b)==="regexp"?c=b.test(g):g instanceof b?c=!0:b.call({},g)===!0&&(c=!0):c=!0);f.ok(c,d)},start:function(){c.semaphore--;if(!(c.semaphore>0)){if(c.semaphore<0)c.semaphore=0;o.setTimeout?j.setTimeout(function(){c.timeout&&clearTimeout(c.timeout);c.blocking=!1;r()},13):(c.blocking=!1, r())}},stop:function(a){c.semaphore++;c.blocking=!0;if(a&&o.setTimeout)clearTimeout(c.timeout),c.timeout=j.setTimeout(function(){f.ok(!1,"Test timed out");f.start()},a)}};f.equals=f.equal;f.same=f.deepEqual;var c={queue:[],blocking:!0,reorder:!0,noglobals:!1,notrycatch:!1};(function(){var a=j.location||{search:"",protocol:"file:"},b=a.search.slice(1).split("&"),d=b.length,g={},i;if(b[0])for(var h=0;h<d;h++)i=b[h].split("="),i[0]=decodeURIComponent(i[0]),i[1]=i[1]?decodeURIComponent(i[1]):!0,g[i[0]]= i[1],i[0]in c&&(c[i[0]]=i[1]);f.urlParams=g;c.filter=g.filter;f.isLocal=a.protocol==="file:"})();typeof exports==="undefined"||typeof require==="undefined"?(l(j,f),j.QUnit=f):(l(exports,f),exports.QUnit=f);l(f,{config:c,init:function(){l(c,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1E3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:0});var a=k("qunit-tests"),b=k("qunit-banner"),d=k("qunit-testresult");if(a)a.innerHTML="";if(b)b.className="";d&&d.parentNode.removeChild(d); if(a)d=document.createElement("p"),d.id="qunit-testresult",d.className="result",a.parentNode.insertBefore(d,a),d.innerHTML="Running...<br/>&nbsp;"},reset:function(){if(j.jQuery)jQuery("#qunit-fixture").html(c.fixture);else{var a=k("qunit-fixture");if(a)a.innerHTML=c.fixture}},triggerEvent:function(a,b,d){document.createEvent?(d=document.createEvent("MouseEvents"),d.initMouseEvent(b,!0,!0,a.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(d)):a.fireEvent&&a.fireEvent("on"+b)}, is:function(a,b){return f.objectType(b)==a},objectType:function(a){if(typeof a==="undefined")return"undefined";if(a===null)return"null";var b=Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]||"";switch(b){case "Number":return isNaN(a)?"nan":"number";case "String":case "Boolean":case "Array":case "Date":case "RegExp":case "Function":return b.toLowerCase()}if(typeof a==="object")return"object"},push:function(a,b,d,g){var i={result:a,message:g,actual:b,expected:d},g=p(g)||(a?"okay":"failed"), g='<span class="test-message">'+g+"</span>",d=p(f.jsDump.parse(d)),b=p(f.jsDump.parse(b)),g=g+'<table><tr class="test-expected"><th>Expected: </th><td><pre>'+d+"</pre></td></tr>";b!=d&&(g+='<tr class="test-actual"><th>Result: </th><td><pre>'+b+"</pre></td></tr>",g+='<tr class="test-diff"><th>Diff: </th><td><pre>'+f.diff(d,b)+"</pre></td></tr>");if(!a){a:{try{throw Error();}catch(h){if(h.stacktrace){b=h.stacktrace.split("\n")[6];break a}else if(h.stack){b=h.stack.split("\n")[4];break a}}b=void 0}if(b)i.source= b,g+='<tr class="test-source"><th>Source: </th><td><pre>'+p(b)+"</pre></td></tr>"}g+="</table>";f.log(i);c.current.assertions.push({result:!!a,message:g})},url:function(a){var a=l(l({},f.urlParams),a),b="?",d;for(d in a)b+=encodeURIComponent(d)+"="+encodeURIComponent(a[d])+"&";return j.location.pathname+b.slice(0,-1)},begin:function(){},done:function(){},log:function(){},testStart:function(){},testDone:function(){},moduleStart:function(){},moduleDone:function(){}});if(typeof document==="undefined"|| document.readyState==="complete")c.autorun=!0;q(j,"load",function(){f.begin({});var a=l({},c);f.init();l(c,a);c.blocking=!1;if(a=k("qunit-userAgent"))a.innerHTML=navigator.userAgent;if(a=k("qunit-header"))a.innerHTML='<a href="'+f.url({filter:void 0})+'"> '+a.innerHTML+'</a> <label><input name="noglobals" type="checkbox"'+(c.noglobals?' checked="checked"':"")+'>noglobals</label><label><input name="notrycatch" type="checkbox"'+(c.notrycatch?' checked="checked"':"")+">notrycatch</label>",q(a,"change", function(a){var b={};b[a.target.name]=a.target.checked?!0:void 0;j.location=f.url(b)});if(a=k("qunit-testrunner-toolbar")){var b=document.createElement("input");b.type="checkbox";b.id="qunit-filter-pass";q(b,"click",function(){var a=document.getElementById("qunit-tests");if(b.checked)a.className+=" hidepass";else{var d=" "+a.className.replace(/[\n\t\r]/g," ")+" ";a.className=d.replace(/ hidepass /," ")}o.sessionStorage&&(b.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))}); if(o.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests"))b.checked=!0,document.getElementById("qunit-tests").className+=" hidepass";a.appendChild(b);var d=document.createElement("label");d.setAttribute("for","qunit-filter-pass");d.innerHTML="Hide passed tests";a.appendChild(d)}if(a=k("qunit-fixture"))c.fixture=a.innerHTML;c.autostart&&f.start()});f.equiv=function(){var a,b=[],d=[],c=function(){function c(a,e){return a instanceof e.constructor||e instanceof a.constructor?e==a:e===a} return{string:c,"boolean":c,number:c,"null":c,undefined:c,nan:function(a){return isNaN(a)},date:function(a,e){return f.objectType(a)==="date"&&e.valueOf()===a.valueOf()},regexp:function(a,e){return f.objectType(a)==="regexp"&&e.source===a.source&&e.global===a.global&&e.ignoreCase===a.ignoreCase&&e.multiline===a.multiline},"function":function(){var a=b[b.length-1];return a!==Object&&typeof a!=="undefined"},array:function(b,e){var c,g,i,j;if(f.objectType(b)!=="array")return!1;j=e.length;if(j!==b.length)return!1; d.push(e);for(c=0;c<j;c++){i=!1;for(g=0;g<d.length;g++)d[g]===e[c]&&(i=!0);if(!i&&!a(e[c],b[c]))return d.pop(),!1}d.pop();return!0},object:function(c,e){var g,f,i,j=!0,k=[],l=[];if(e.constructor!==c.constructor)return!1;b.push(e.constructor);d.push(e);for(g in e){i=!1;for(f=0;f<d.length;f++)d[f]===e[g]&&(i=!0);k.push(g);if(!i&&!a(e[g],c[g])){j=!1;break}}b.pop();d.pop();for(g in c)l.push(g);return j&&a(k.sort(),l.sort())}}}();return a=function(){var a=Array.prototype.slice.apply(arguments);if(a.length< 2)return!0;var b;if(a[0]===a[1])b=!0;else if(a[0]===null||a[1]===null||typeof a[0]==="undefined"||typeof a[1]==="undefined"||f.objectType(a[0])!==f.objectType(a[1]))b=!1;else{b=[a[1],a[0]];var e=f.objectType(a[0]);b=e?f.objectType(c[e])==="function"?c[e].apply(c,b):c[e]:void 0}return b&&arguments.callee.apply(this,a.splice(1,a.length-1))}}();f.jsDump=function(){function a(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}function b(a){return a+""}function d(a,b,d){var c=h.separator(),g=h.indent(), f=h.indent(1);b.join&&(b=b.join(","+c+f));if(!b)return a+d;return[a,f+b,g+d].join(c)}function c(a){var b=a.length,g=Array(b);for(this.up();b--;)g[b]=this.parse(a[b]);this.down();return d("[",g,"]")}var i=/^function (\w+)/,h={parse:function(a,b){var d=this.parsers[b||this.typeOf(a)],b=typeof d;return b=="function"?d.call(this,a):b=="string"?d:this.parsers.error},typeOf:function(a){return a===null?"null":typeof a==="undefined"?"undefined":f.is("RegExp",a)?"regexp":f.is("Date",a)?"date":f.is("Function", a)?"function":typeof a.setInterval!==void 0&&typeof a.document!=="undefined"&&typeof a.nodeType==="undefined"?"window":a.nodeType===9?"document":a.nodeType?"node":typeof a==="object"&&typeof a.length==="number"&&a.length>=0?"array":typeof a},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var b=this.indentChar;this.HTML&&(b=b.replace(/\t/g," ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(b)}, up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,b){this.parsers[a]=b},quote:a,literal:b,join:d,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var b="function",c="name"in a?a.name:(i.exec(a)||[])[1];c&&(b+=" "+c);b+="(";b=[b,f.jsDump.parse(a,"functionArgs"),"){"].join("");return d(b,f.jsDump.parse(a,"functionCode"),"}")},array:c,nodelist:c,arguments:c, object:function(a){var b=[];f.jsDump.up();for(var c in a)b.push(f.jsDump.parse(c,"key")+": "+f.jsDump.parse(a[c]));f.jsDump.down();return d("{",b,"}")},node:function(a){var b=f.jsDump.HTML?"&lt;":"<",d=f.jsDump.HTML?"&gt;":">",c=a.nodeName.toLowerCase(),g=b+c,i;for(i in f.jsDump.DOMAttrs){var h=a[f.jsDump.DOMAttrs[i]];h&&(g+=" "+i+"="+f.jsDump.parse(h,"attribute"))}return g+d+b+"/"+c+d},functionArgs:function(a){a=a.length;if(!a)return"";for(var b=Array(a);a--;)b[a]=String.fromCharCode(97+a);return" "+ b.join(", ")+" "},key:a,functionCode:"[code]",attribute:a,string:a,date:a,regexp:b,number:b,"boolean":b},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:" ",multiline:!0};return h}();f.diff=function(){return function(a,b){var a=a.replace(/\s+$/,""),b=b.replace(/\s+$/,""),d;d=a==""?[]:a.split(/\s+/);for(var c=b==""?[]:b.split(/\s+/),f={},h={},e=0;e<c.length;e++)f[c[e]]==null&&(f[c[e]]={rows:[],o:null}),f[c[e]].rows.push(e);for(e=0;e<d.length;e++)h[d[e]]==null&&(h[d[e]]={rows:[], n:null}),h[d[e]].rows.push(e);for(e in f)f[e].rows.length==1&&typeof h[e]!="undefined"&&h[e].rows.length==1&&(c[f[e].rows[0]]={text:c[f[e].rows[0]],row:h[e].rows[0]},d[h[e].rows[0]]={text:d[h[e].rows[0]],row:f[e].rows[0]});for(e=0;e<c.length-1;e++)c[e].text!=null&&c[e+1].text==null&&c[e].row+1<d.length&&d[c[e].row+1].text==null&&c[e+1]==d[c[e].row+1]&&(c[e+1]={text:c[e+1],row:c[e].row+1},d[c[e].row+1]={text:d[c[e].row+1],row:e+1});for(e=c.length-1;e>0;e--)c[e].text!=null&&c[e-1].text==null&&c[e].row> 0&&d[c[e].row-1].text==null&&c[e-1]==d[c[e].row-1]&&(c[e-1]={text:c[e-1],row:c[e].row-1},d[c[e].row-1]={text:d[c[e].row-1],row:e-1});d={o:d,n:c};c="";f=a.match(/\s+/g);f==null?f=[" "]:f.push(" ");h=b.match(/\s+/g);h==null?h=[" "]:h.push(" ");if(d.n.length==0)for(e=0;e<d.o.length;e++)c+="<del>"+d.o[e]+f[e]+"</del>";else{if(d.n[0].text==null)for(b=0;b<d.o.length&&d.o[b].text==null;b++)c+="<del>"+d.o[b]+f[b]+"</del>";for(e=0;e<d.n.length;e++)if(d.n[e].text==null)c+="<ins>"+d.n[e]+h[e]+"</ins>";else{for(var j= "",b=d.n[e].row+1;b<d.o.length&&d.o[b].text==null;b++)j+="<del>"+d.o[b]+f[b]+"</del>";c+=" "+d.n[e].text+h[e]+j}}return c}}()})(this);