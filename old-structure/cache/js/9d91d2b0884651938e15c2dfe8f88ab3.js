
function luhn_check(a){for(var e=a.replace(/\D/g,"").length,b=e%2,c=0,d=0;d<e;d++){var f=a.charAt(d);d%2==b&&(f*=2,f>9&&(f-=9));c+=parseInt(f,10)}return c%10==0?!0:!1}function in_array(a,e,b){var c=!1,d,b=!!b;for(d in e)if(b&&e[d]===a||!b&&e[d]==a){c=!0;break}return c}function Validator(a){this.fObj=document.forms[a];var e=arguments.length>0?arguments[1]:!1;if(!this.fObj)return alert("Error: could not get form object "+a),!1;this.fObj.onsubmit?(this.fObj.old_onsubmit=this.fObj.onsubmit,this.fObj.onsubmit=null):this.fObj.old_onsubmit=null;this.vElements=[];e?this.fObj.trigger=form_submit_handler:this.fObj.onsubmit=form_submit_handler;this.addValidation=add_validation;this.removeValidation=remove_validation;this.clearAllValidations=clear_all_validations;this.clearValidations=clear_validations;this.restoreValidations=restore_validations;return!0}function clear_all_validations(){for(var a=0;a<this.fObj.elements.length;a++)this.fObj.elements[a].vSet=null}function clear_validations(a,e){for(var b=start=e?e:0;b<this.fObj.elements.length;b++)if(this.fObj.elements[b].val&&in_array(this.fObj.elements[b].val.vSet[0][0],a))this.fObj.elements[b].val.oldSet=this.fObj.elements[b].val.vSet,this.fObj.elements[b].val.vSet=null}function restore_validations(a,e){for(var b=start=e?e:0;b<this.fObj.elements.length;b++)if(this.fObj.elements[b].val&&this.fObj.elements[b].val.oldSet)this.fObj.elements[b].val.vSet=this.fObj.elements[b].val.oldSet}function form_submit_handler(){for(var a=0;a<this.elements.length;a++)if(this.elements[a].val&&this.elements[a].val.vSet&&!this.elements[a].val.validate(this))return!1;return!0}function remove_validation(a){if((a=this.fObj[a])&&a.val)a.val.oldSet=a.val.vSet,a.val.vSet=null}function add_validation(a,e,b){if(this.fObj){var c=this.fObj[a];if(c)c.val?c.val.oldSet?c.val.vSet=c.val.oldSet:c.val.add(a,e,b):(c.val=new Val,c.val.add(a,e,b));else if(elementArray=a.split("|"),elementArray.length>1)if(!this.fObj[elementArray[0]]||!this.fObj[elementArray[1]])alert("Error: Could not get the input objects");else{if(!this.fObj[elementArray[0]].val)this.fObj[elementArray[0]].val=new Val;this.fObj[elementArray[0]].val.add(a,e,b)}else alert("Error: Could not get the input object named: "+a)}else alert("Error: the form object is not set properly")}function Val(){this.vSet=[];this.add=addVal;this.validate=validate}function addVal(a,e,b){this.vSet[this.vSet.length]=[a,e,b]}function validate(a){for(i=0;i<this.vSet.length;i++)if(!checkValidation(this.vSet[i][0],this.vSet[i][1],this.vSet[i][2],a))return elementArray=this.vSet[i][0].split("|"),a[elementArray[0]].focus(),!1;return!0}function checkValidation(a,e,b,c){e=e.split("=");command=e[0];cmdvalue=e.length>1?e[1]:"";e={alnum:/[^A-Za-z0-9\ ]/,alnumhyphen:/[^A-Za-z0-9\-_]/,alpha:/[^A-Za-z]/,cc:/^(3[47]|4|5[1-5]|6011)/,csv:/[^-a-zA-Z0-9,\s]/,custom:/[^A-Za-z0-9\042\047\055\057\ _$.,!?()]/,date:/^[\d]{4}-[\d]{2}-[\d]{2}$/,email:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,"float":/[^0-9\.]/,img:/^[0-9A-Za-z_ \-]+(.[jJ][pP][gG]|.[jJ][pP][eE][gG]|.[gG][iI][fF]|.[pP][nN][gG])$/,num:/[^0-9]/,phone:/[^0-9\- ()]/,URL:/(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?/,zip:/[^-0-9]/};switch(command){case"alnum":case"alphanumeric":var d=c[a].value.search(e.alnum);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" must be alpha-numeric";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"alnumhyphen":d=c[a].value.search(e.alnumhyphen);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" may only contain alpha-numeric, hyphen and underscore characters";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"alphabetic":case"alpha":d=c[a].value.search(e.alpha);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" may only contain letters (no symbols or numbers)";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"cc":case"credit":case"creditcard":b=c[a].value.replace(/\D/g,"");a=b.length;c=b[0];if(null!=e.cc.exec(b)){switch(c){case"4":if(13!=a&&16!=a)return alert("The credit card number you entered is not valid. Please try again."),!1;else d=1;break;case"5":if(16!=a)return alert("The credit card number you entered is not valid. Please try again."),!1;else d=2;break;case"6":if(16!=a)return alert("The credit card number you entered is not valid. Please try again."),!1;else d=3;break;case"3":if(15!=a)return alert("The credit card number you entered is not valid. Please try again."),!1;else d=4}if(luhn_check(b)){if(typeof d!="undefined")document.getElementById("sCCType").options[d].selected=!0}else return alert("The credit card number you entered is not valid. Please try again."),!1}else return alert("The credit card number you entered is not valid. Please try again."),!1;break;case"csv":d=c[a].value.search(e.csv);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" may only contain alpha-numeric characters, '-' and '_', separated by commas";alert(b);return!1}break;case"custom":d=c[a].value.search(e.custom);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" may only contain alpha-numeric, {'}, {,}, {.}, {&}, {/}, {-}, {\"}, {?}, {(}, {)}, {_} and {!} characters";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"date":if(c[a].value.length>0&&c[a].value!=c[a].getAttribute("tmpval")&&(d=c[a].value.match(e.date),d==null)){if(!b||b.length==0)b=a+" must contain a valid date";alert(b);return!1}break;case"email":if(c[a].value.length>0&&(d=c[a].value.match(e.email),d==null)){if(!b||b.length==0)b=a+" must contain a valid email address";alert(b);return!1}break;case"extension":case"ext":d=cmdvalue.split("|");c=c[a].value.split(".")[c[a].value.split(".").length-1].toLowerCase();if(d.indexOf(c)==-1){if(!b||b.length==0)b=a+" may only contain the following file types: "+d;alert(b+'\n[Current file type: "'+c+'" ]');return!1}break;case"float":d=c[a].value.search(e["float"]);if(c[a].value.length>0&&d>=0&&c[a].value!=c[a].getAttribute("tmpval")){if(!b||b.length==0)b=a+" may only contain numbers and a period";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"gt":case"greaterthan":if(isNaN(c[a].value))return alert(a+" must be numeric"),!1;if(eval(c[a].value)<=eval(cmdvalue)){if(!b||b.length==0)b=a+" must contain a number greater than "+cmdvalue;alert(b);return!1}break;case"image":case"img":d=c[a].value.split("\\")[c[a].value.split("\\").length-1].match(e.img);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" may only hold an image with extensions jpg, jpeg, gif or png.";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"lt":case"lessthan":if(isNaN(c[a].value))return alert(a+" must be numeric"),!1;if(eval(c[a].value)>=eval(cmdvalue)){if(!b||b.length==0)b=a+" must contain a number less than "+cmdvalue;alert(b);return!1}break;case"match":a=a.split("|");if(c[a[0]].value!=c[a[1]].value){if(!b||b.length==0)b=a[0]+" and "+a[1]+" must match";alert(b);return!1}break;case"maxlength":case"maxlen":if(eval(c[a].value.length)>eval(cmdvalue)){if(!b||b.length==0)b=a+" may not be longer than "+cmdvalue+" characters";alert(b+"\n[Current length = "+c[a].value.length+" ]");return!1}break;case"minlength":case"minlen":if(eval(c[a].value.length)<eval(cmdvalue)){if(!b||b.length==0)b=a+" may not be shorter than "+cmdvalue+" characters";alert(b+"\n[Current length = "+c[a].value.length+" ]");return!1}break;case"num":case"numeric":d=c[a].value.search(e.num);if(c[a].value.length>0&&d>=0&&c[a].value!=c[a].getAttribute("tmpval")){if(!b||b.length==0)b=a+" must be a number";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"phone":d=c[a].value.search(e.phone);if(c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" must contain a valid phone number";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}break;case"regexp":if(c[a].value.length>0&&!c[a].value.match(cmdvalue)){if(!b||b.length==0)b=a+" contains invalid characters";alert(b);return!1}break;case"req":case"required":if(eval(c[a].value.length)==0||c[a].type=="checkbox"&&c[a].checked==!1){if(!b||b.length==0)b=a+" is a required field";alert(b);return!1}break;case"URL":if(c[a].value.length>0&&(d=c[a].value.match(e.URL),d==null)){if(!b||b.length==0)b=a+" must contain a valid URL";alert(b);return!1}break;case"val":if(c[a].value!=cmdvalue&&c[a].value.length>0){if(!b||b.length==0)b=a+'" must contain the following value "'+cmdvalue+'"';alert(b);return!1}break;case"!val":if(c[a].value==cmdvalue&&c[a].value.length>0){if(!b||b.length==0)b=a+'" must not contain the following value "'+cmdvalue+'"';alert(b);return!1}break;case"zip":if(d=c[a].value.search(e.zip),c[a].value.length>0&&d>=0){if(!b||b.length==0)b=a+" must contain a valid zip code";alert(b+"\n [Error character position "+eval(d+1)+"]");return!1}}return!0};var sparrow=function(a){$("input[tmpval],textarea[tmpval]",a).each(function(){$(this).focus(function(){$(this).val()==$(this).attr("tmpval")&&$(this).val("").removeClass("tmpval")}).blur(function(){var b=$(this).val(),a=$(this).attr("tmpval");(0==b.length||b==a)&&$(this).val(a).addClass("tmpval")});$(this).val().length||$(this).val($(this).attr("tmpval")).addClass("tmpval")});var e=$("table[ajax],table.dt",a);e.length&&head.js("/resources/js_single/?f=jquery.datatables",function(){e.addClass("dt").each(function(){var b=$(this).attr("perPage").split(","),a="",d=$(this).find("th").append('<img src="/images/trans.gif" width="10" height="8" />'),h=[],i=[],j="",e="",f=$(this).attr("ajax"),c;for(c in b)a+='<option value="'+b[c]+'">'+b[c]+"</option>";if(d.length)for(c=0;c<d.length;c++){if(j=$(d[c]).attr("sort")){var g=-1==j.search("desc")?"asc":"desc";h[j.replace(" desc","")-1]=[c,g]}(e=$(d[c]).attr("column"))?i.push({sType:e}):i.push(null)}else h=[[0,"asc"]];b={bAutoWidth:!1,iDisplayLength:parseInt(b[0]),oLanguage:{sLengthMenu:"Rows: <select>"+a+"</select>",sInfo:"_START_ - _END_ of _TOTAL_"},aaSorting:h,aoColumns:i,fnDrawCallback:function(){sparrow($(this).find("tr:last").addClass("last").end())},sDom:'<"top"Tlfr>t<"bottom"pi>'};f&&(b.bProcessing=1,b.bServerSide=1,b.sAjaxSource=f);$(this).dataTable(b)})});var f=$("a[rel=dialog]",a);f.length&&head.js("/resources/js_single/?f=jquery.boxy",function(){f.click(function(b){b.preventDefault();var b=$(this).attr("href").split("#"),a=$("#"+b[1]),d={title:$(this).attr("title"),behaviours:sparrow};a.length&&"0"!=$(this).attr("cache")?new Boxy(a,d):($("body").append('<div id="'+b[1]+'" class="dialog" />'),a=$("#"+b[1]),a.load(b[0],function(){new Boxy(a,d)}))})});$("a[ajax]",a).click(function(a){a.preventDefault();a=$(this).attr("confirm");(!a||confirm(a))&&$.get($(this).attr("href"),ajaxResponse,"json")}).removeAttr("ajax");var g=$("textarea[rte]",a);g.length&&head.js("/ckeditor/ckeditor.js","/ckeditor/adapters/jquery.js",function(){g.ckeditor({autoGrow_minHeight:100,resize_minHeight:100,height:100,toolbar:[["Bold","Italic","Underline"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["NumberedList","BulletedList","Table"],["Format"],["Link","Unlink"],["Source"]]})});var k=$("form[ajax]",a);k.length&&head.js("/resources/js_single/?f=jquery.form",function(){k.ajaxForm({dataType:"json",success:ajaxResponse})})};$.fn.sparrow=sparrow;head.ready(function(){sparrow($("body"))});function ajaxResponse(a){a.success?a.refresh?window.location=window.location:"object"==typeof a.jquery&&head.js("/resources/js_single/?f=jquery.php",function(){php(a.jquery)}):a.error&&alert(a.error)};(function($){$.fn.extend({notify:function(options){var settings=$.extend({type:'sticky',fade:5000,speed:500,onDemandButtonHeight:35},options);return this.each(function(){var wrapper=$(this);if(0!=settings.fade)
setTimeout(function(){wrapper.fadeOut(500,function(){$(this).remove();});},settings.fade);var ondemandBtn=$('.ondemand-button');var dh=-35;var w=wrapper.outerWidth()-ondemandBtn.outerWidth();ondemandBtn.css('left',w).css('margin-top',dh+"px");var h=-wrapper.outerHeight();wrapper.addClass(settings.type).css('margin-top',h).show();if(settings.type!='ondemand'){wrapper.stop(true,false).animate({marginTop:0},settings.speed);}
else{ondemandBtn.stop(true,false).animate({marginTop:0},settings.speed);}
var closeBtn=$('.close',wrapper);closeBtn.click(function(){if(settings.type=='ondemand'){wrapper.stop(true,false).animate({marginTop:h},settings.speed,function(){wrapper.hide();ondemandBtn.stop(true,false).animate({marginTop:0},settings.speed);});}
else{wrapper.stop(true,false).animate({marginTop:h},settings.speed,function(){wrapper.hide();});}});if(settings.type=='floated'){$(document).scroll(function(e){wrapper.stop(true,false).animate({top:$(document).scrollTop()},settings.speed);}).resize(function(e){c
wrapper.stop(true,false).animate({top:$(document).scrollTop()},settings.speed);});}
else if(settings.type=='ondemand'){ondemandBtn.click(function(){$(this).animate({marginTop:dh},settings.speed,function(){wrapper.show().animate({marginTop:0},settings.speed,function(){});})});}});}});})(jQuery);jQuery(function($){$('.notification').notify();$('body').on('click','a[href^=#]',function(e){e.preventDefault();});$('#aTicket').click(function(){var a=$(this);if(a.hasClass('loaded')){new Boxy($('#dTicketPopup'),{title:a.attr('title')});return;}
head.js('/resources/js_single/?f=jquery.boxy','/resources/js_single/?f=jquery.form','/resources/js_single/?f=swfobject','/resources/js_single/?f=jquery.uploadify',function(){a.addClass('loaded');new Boxy($('#dTicketPopup'),{title:a.attr('title')});$('#fCreateTicket').addClass('ajax').ajaxForm({dataType:'json',beforeSubmit:function(){var tTicketSummary=$('#tTicketSummary'),summary=tTicketSummary.val(),taTicket=$('#taTicket'),message=taTicket.val();if(!summary.length||summary==tTicketSummary.attr('tmpval')){alert(tTicketSummary.attr('error'));return false;}
if(!message.length||message==taTicket.attr('tmpval')){alert(taTicket.attr('error'));return false;}
return true;},success:ajaxResponse});});});$('#bCreateTicket').click(function(){$('#fCreateTicket').submit();});$('#dTicketPopup .expander').click(function(){if($(this).hasClass('open')){$(this).removeClass('open').addClass('close');$('#'+$(this).attr('rel')).show();}else{$(this).removeClass('close').addClass('open');$('#'+$(this).attr('rel')).hide();}});});